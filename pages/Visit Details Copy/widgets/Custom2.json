{
  "backgroundColor": "#FFFFFF",
  "borderColor": "#E0DEDE",
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": "1",
  "bottomRow": 146,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "defaultModel": "{\n  \"tips\": [\n    \"Pass data to this widget in the default model field\",\n    \"Access data in the javascript file using the appsmith.model variable\",\n    \"Create events in the widget and trigger them in the javascript file using appsmith.triggerEvent('eventName')\",\n    \"Access data in CSS as var(--appsmith-model-{property-name})\"\n  ]\n}",
  "dynamicBindingPathList": [
    {
      "key": "theme"
    },
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    }
  ],
  "dynamicHeight": "FIXED",
  "dynamicTriggerPathList": [
    {
      "key": "onResetClick"
    }
  ],
  "events": [
    "onResetClick"
  ],
  "isCanvas": false,
  "isLoading": false,
  "isSearchWildcard": true,
  "isVisible": true,
  "key": "y664pyklof",
  "leftColumn": 0,
  "maxDynamicHeight": 9000,
  "minDynamicHeight": 4,
  "mobileBottomRow": 69,
  "mobileLeftColumn": 0,
  "mobileRightColumn": 23,
  "mobileTopRow": 39,
  "needsErrorInfo": false,
  "onResetClick": "{{showAlert('Successfully reset!!', '');}}",
  "originalBottomRow": 171,
  "originalTopRow": 25,
  "parentColumnSpace": 19.8125,
  "parentId": "0",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "rightColumn": 64,
  "shouldScrollContents": true,
  "srcDoc": {
    "css": "@charset \"UTF-8\";\n/* Clinic Management System - CSS Styles */\n/* Reset and Base Styles */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: \"Inter\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif;\n  background-color: #f5f6fa;\n  color: #2c3e50;\n  line-height: 1.5;\n}\n\n/* Top Header Bar */\n.top-header {\n  background: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 16px 32px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.page-title {\n  font-size: 24px;\n  font-weight: 600;\n  color: #2c3e50;\n}\n\n.header-actions {\n  display: flex;\n  gap: 12px;\n}\n\n/* Button Styles */\n.btn {\n  padding: 10px 20px;\n  border-radius: 8px;\n  border: none;\n  font-family: \"Inter\", sans-serif;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.btn-secondary {\n  background: #f5f6f8;\n  color: #4a4a4a;\n  border: 1px solid #e0e0e0;\n}\n\n.btn-secondary:hover {\n  background: #e8eaed;\n}\n\n.btn-primary {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n}\n\n.btn-primary:hover {\n  filter: brightness(1.1);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.btn-primary:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.btn-back {\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #7f8c8d;\n}\n\n.btn-back:hover {\n  border-color: #667eea;\n  color: #667eea;\n  background: #f0f4ff;\n}\n\n.btn-next {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n}\n\n.btn-submit {\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\n  color: white;\n}\n\n.btn-submit:hover {\n  box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);\n}\n\n.btn-add-drug {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  padding: 8px 20px;\n  border-radius: 6px;\n  border: none;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.btn-add-drug:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.btn-delete {\n  background: transparent;\n  border: none;\n  color: #e74c3c;\n  cursor: pointer;\n  font-size: 14px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n.btn-delete:hover {\n  background: #fee;\n  color: #c0392b;\n}\n\n.btn-icon {\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 16px;\n}\n\n.btn-edit {\n  background: #e8f4ff;\n  color: #0066cc;\n}\n\n.btn-edit:hover {\n  background: #0066cc;\n  color: white;\n}\n\n.btn-download {\n  background: white;\n  border: 1px solid #d1d5db;\n  padding: 8px 16px;\n  border-radius: 6px;\n  color: #7f8c8d;\n  font-size: 14px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.2s ease;\n}\n\n.btn-download:hover {\n  background: #f8f9fa;\n  border-color: #667eea;\n  color: #667eea;\n}\n\n/* Stepper Component */\n.stepper-container {\n  background: white;\n  padding: 20px 32px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n}\n\n.stepper {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.stepper::before {\n  content: \"\";\n  position: absolute;\n  top: 24px;\n  left: 40px;\n  right: 40px;\n  height: 2px;\n  background: #e0e0e0;\n  z-index: 0;\n}\n\n.stepper-progress {\n  position: absolute;\n  top: 24px;\n  left: 40px;\n  height: 2px;\n  background: linear-gradient(90deg, #667eea, #764ba2);\n  z-index: 1;\n  transition: width 0.3s ease;\n  width: 0;\n}\n\n.step {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  z-index: 2;\n  cursor: pointer;\n  flex: 1;\n  max-width: 180px;\n}\n\n.step-circle {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: white;\n  border: 2px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  font-size: 16px;\n  color: #888;\n  transition: all 0.3s ease;\n  position: relative;\n}\n\n.step.active .step-circle {\n  border-color: #667eea;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  transform: scale(1.1);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.step.completed .step-circle {\n  background: #48bb78;\n  border-color: #48bb78;\n  color: white;\n}\n\n.step.completed .step-circle::after {\n  content: \"‚úì\";\n  position: absolute;\n  font-size: 20px;\n}\n\n.step.completed .step-number {\n  display: none;\n}\n\n.step-label {\n  margin-top: 12px;\n  font-size: 13px;\n  font-weight: 500;\n  color: #888;\n  text-align: center;\n  transition: color 0.3s ease;\n}\n\n.step.active .step-label {\n  color: #667eea;\n  font-weight: 600;\n}\n\n.step.completed .step-label {\n  color: #48bb78;\n}\n\n.step-description {\n  font-size: 11px;\n  color: #aaa;\n  margin-top: 4px;\n  text-align: center;\n}\n\n/* Main Container */\n.main-container {\n  max-width: 1400px;\n  margin: 24px auto;\n  padding: 0 32px;\n}\n\n/* Content Sections */\n.step-content {\n  display: none;\n  animation: fadeIn 0.3s ease;\n}\n\n.step-content.active {\n  display: block;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n/* Patient Card */\n.patient-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  padding: 24px;\n  margin-bottom: 24px;\n}\n\n.patient-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.patient-info {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.patient-avatar {\n  width: 60px;\n  height: 60px;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  border-radius: 50%;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.patient-details h3 {\n  font-size: 18px;\n  font-weight: 300;\n  color: #2c3e50;\n  margin-bottom: 4px;\n}\n\n.patient-details p {\n  font-size: 14px;\n  color: #7f8c8d;\n}\n\n.status-badge {\n  padding: 6px 16px;\n  border-radius: 20px;\n  font-size: 13px;\n  font-weight: 300;\n}\n\n.status-active {\n  background: #e7f6ed;\n  color: #27ae60;\n}\n\n.divider {\n  border-top: 1px solid #f0f0f0;\n  margin: 16px 0 20px;\n}\n\n/* Info Grid */\n.info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px 24px;\n}\n\n.info-item {\n  display: flex;\n  flex-direction: column;\n}\n\n.info-label {\n  font-size: 12px;\n  color: #888;\n  letter-spacing: 0.4px;\n  margin-bottom: 4px;\n  text-transform: uppercase;\n}\n\n.info-value {\n  font-size: 15px;\n  font-weight: 300;\n  color: #1a1a1a;\n}\n\n/* Section Cards */\n.section-card {\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  margin-bottom: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.section-title {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #1a1a1a;\n}\n\n.section-icon {\n  width: 32px;\n  height: 32px;\n  background: linear-gradient(135deg, #f5f6f8, #e8eaed);\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n}\n\n/* Visit Tabs */\n.visit-tabs {\n  background: white;\n  border-radius: 12px;\n  padding: 16px;\n  margin-bottom: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n.tabs-header {\n  display: flex;\n  gap: 4px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.tab-btn {\n  padding: 12px 24px;\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid transparent;\n  color: #7f8c8d;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-family: \"Inter\", sans-serif;\n}\n\n.tab-btn:hover {\n  color: #2c3e50;\n}\n\n.tab-btn.active {\n  color: #667eea;\n  border-bottom-color: #667eea;\n}\n\n/* Visit Plan Section */\n.visit-plan-section {\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n/* Forms */\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-label {\n  display: block;\n  font-size: 13px;\n  color: #6e6e6e;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\n\n.form-select, .form-input, .form-textarea {\n  width: 100%;\n  padding: 12px 16px;\n  border: 1.5px solid #e8eaed;\n  border-radius: 10px;\n  font-family: \"Inter\", sans-serif;\n  font-size: 14px;\n  color: #1a1a1a;\n  background: white;\n  transition: all 0.2s ease;\n}\n\n.form-textarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.form-select:focus, .form-input:focus, .form-textarea:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n/* Drug Form */\n.drug-form {\n  background: #f8f9fa;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 24px;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 2fr 1fr 1fr 2fr;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.form-row-small {\n  display: grid;\n  grid-template-columns: 100px 100px;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n/* Input Grid */\n.input-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 16px;\n  margin-top: 20px;\n  padding: 20px;\n  background: #f8f9fb;\n  border-radius: 12px;\n}\n\n.input-field {\n  display: flex;\n  flex-direction: column;\n}\n\n.input-field label {\n  font-size: 12px;\n  color: #6e6e6e;\n  margin-bottom: 6px;\n  font-weight: 500;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n}\n\n.input-field input {\n  padding: 10px 12px;\n  border: 1.5px solid #e8eaed;\n  border-radius: 8px;\n  font-size: 14px;\n  font-family: \"Inter\", sans-serif;\n  background: white;\n}\n\n.input-field input:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n/* Tables */\n.table-container {\n  overflow-x: auto;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n}\n\n.data-table, .drug-table {\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\n.data-table thead, .drug-table thead {\n  background: #f8f9fb;\n}\n\n.data-table th, .drug-table th {\n  padding: 12px 16px;\n  text-align: left;\n  font-size: 12px;\n  font-weight: 300;\n  color: #6e6e6e;\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n  border-bottom: 1px solid #e8eaed;\n  white-space: nowrap;\n}\n\n.data-table td, .drug-table td {\n  padding: 16px;\n  font-size: 14px;\n  color: #1a1a1a;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.data-table tbody tr:hover, .drug-table tbody tr:hover {\n  background-color: #fafbfc;\n}\n\n.data-table tbody tr:last-child td, .drug-table tbody tr:last-child td {\n  border-bottom: none;\n}\n\n/* Table Toolbar */\n.table-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding: 12px;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n.search-box {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: white;\n  padding: 8px 12px;\n  border-radius: 6px;\n  border: 1px solid #d1d5db;\n  width: 250px;\n}\n\n.search-box input {\n  border: none;\n  outline: none;\n  font-size: 14px;\n  width: 100%;\n  font-family: \"Inter\", sans-serif;\n}\n\n/* Pagination */\n.pagination {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e0e0e0;\n}\n\n.pagination-info {\n  font-size: 14px;\n  color: #7f8c8d;\n}\n\n.pagination-controls {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.page-btn {\n  padding: 6px 12px;\n  border: 1px solid #d1d5db;\n  background: white;\n  border-radius: 4px;\n  color: #7f8c8d;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.page-btn:hover:not(:disabled) {\n  border-color: #667eea;\n  color: #667eea;\n  background: #f0f4ff;\n}\n\n.page-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.page-input {\n  width: 50px;\n  padding: 6px 8px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  text-align: center;\n  font-size: 14px;\n}\n\n/* Code Badge */\n.code-badge {\n  display: inline-flex;\n  padding: 4px 10px;\n  background: #f0f1f3;\n  color: #1a1a1a;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 300;\n  font-family: \"Monaco\", \"Courier New\", monospace;\n}\n\n/* Action Buttons */\n.action-buttons {\n  display: flex;\n  gap: 8px;\n}\n\n/* Upload Area */\n.upload-area {\n  border: 2px dashed #d0d3d8;\n  border-radius: 12px;\n  padding: 32px;\n  text-align: center;\n  background: #fafbfc;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.upload-area:hover {\n  border-color: #667eea;\n  background: rgba(102, 126, 234, 0.05);\n}\n\n.upload-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.upload-text {\n  color: #6e6e6e;\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n\n.upload-hint {\n  color: #aaa;\n  font-size: 12px;\n}\n\n/* Summary Cards */\n.summary-card {\n  background: linear-gradient(135deg, #f8f9fa, #ffffff);\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  padding: 20px;\n  margin-top: 24px;\n}\n\n.summary-title {\n  font-size: 15px;\n  font-weight: 600;\n  color: #2c3e50;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.summary-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n}\n\n.summary-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #f0f0f0;\n}\n\n.summary-label {\n  font-size: 13px;\n  color: #7f8c8d;\n}\n\n.summary-value {\n  font-size: 14px;\n  font-weight: 300;\n  color: #2c3e50;\n}\n\n.summary-value.success {\n  color: #27ae60;\n}\n\n.summary-value.danger {\n  color: #e74c3c;\n}\n\n/* Alert Card */\n.alert-card {\n  background: #f0f8ff;\n  border: 1px solid #0066cc;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 24px;\n}\n\n/* Navigation */\n.step-navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px 0;\n  margin-top: 32px;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .stepper {\n    flex-wrap: wrap;\n  }\n  .step-label {\n    font-size: 11px;\n  }\n  .step-description {\n    display: none;\n  }\n  .form-row {\n    grid-template-columns: 1fr;\n  }\n  .info-grid {\n    grid-template-columns: 1fr;\n  }\n  .summary-grid {\n    grid-template-columns: 1fr;\n  }\n}",
    "html": "<!-- Clinic Management System - HTML Structure -->\n<!-- Top Header -->\n<header class=\"top-header\">\n    <h1 class=\"page-title\">Patient Visit Management</h1>\n    <div class=\"header-actions\">\n        <button class=\"btn btn-secondary\" onclick=\"saveDraft()\">\n            <span>üíæ</span>\n            Save Draft\n        </button>\n        <button class=\"btn btn-primary\" id=\"header-submit\" disabled>\n            <span>‚úì</span>\n            Send to Approval\n        </button>\n    </div>\n</header>\n\n<!-- Stepper Component -->\n<div class=\"stepper-container\">\n    <div class=\"stepper\">\n        <div class=\"stepper-progress\" id=\"stepper-progress\"></div>\n        \n        <div class=\"step active\" data-step=\"1\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">1</span>\n            </div>\n            <div class=\"step-label\">Visit Details</div>\n            <div class=\"step-description\">Patient information</div>\n        </div>\n\n        <div class=\"step\" data-step=\"2\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">2</span>\n            </div>\n            <div class=\"step-label\">Diagnoses</div>\n            <div class=\"step-description\">ICD-10 codes</div>\n        </div>\n\n        <div class=\"step\" data-step=\"3\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">3</span>\n            </div>\n            <div class=\"step-label\">Procedures</div>\n            <div class=\"step-description\">Claim procedures</div>\n        </div>\n\n        <div class=\"step\" data-step=\"4\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">4</span>\n            </div>\n            <div class=\"step-label\">Visit Plan</div>\n            <div class=\"step-description\">Medications</div>\n        </div>\n\n        <div class=\"step\" data-step=\"5\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">5</span>\n            </div>\n            <div class=\"step-label\">Documents & Notes</div>\n            <div class=\"step-description\">Attachments</div>\n        </div>\n\n        <div class=\"step\" data-step=\"6\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">6</span>\n            </div>\n            <div class=\"step-label\">Send Visit</div>\n            <div class=\"step-description\">Review & submit</div>\n        </div>\n    </div>\n</div>\n\n<!-- Main Container -->\n<div class=\"main-container\">\n\n    <!-- Step 1: Visit Details -->\n    <div class=\"step-content active\" id=\"step-1\">\n        <div class=\"patient-card\">\n            <div class=\"patient-header\">\n                <div class=\"patient-info\">\n                    <div class=\"patient-avatar\">FA</div>\n                    <div class=\"patient-details\">\n                        <h3>Fuad Abdullah Hamed Fathee</h3>\n                        <p>National ID: 975555555 ‚Ä¢ Contact: 0792536333</p>\n                    </div>\n                </div>\n                <span class=\"status-badge status-active\">Active Visit</span>\n            </div>\n            <div class=\"divider\"></div>\n            <div class=\"info-grid\">\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Visit Number</span>\n                    <span class=\"info-value\">0001</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Visit Date</span>\n                    <span class=\"info-value\">September 23, 2025</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Risk Carrier</span>\n                    <span class=\"info-value\">Risk Carrier Testing</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Attending Doctor</span>\n                    <span class=\"info-value\">Dr. Ameen Ibrahim Ahmad</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Speciality</span>\n                    <span class=\"info-value\">General Practitioner</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Head of Family</span>\n                    <span class=\"info-value\">Self</span>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üè•</div>\n                    <span>Additional Visit Information</span>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Visit Type</label>\n                <select class=\"form-select\">\n                    <option>Consultation</option>\n                    <option>Follow-up</option>\n                    <option>Emergency</option>\n                    <option>Routine Check-up</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Chief Complaint</label>\n                <textarea class=\"form-textarea\" placeholder=\"Enter the patient's chief complaint...\"></textarea>\n            </div>\n        </div>\n\n        <div class=\"step-navigation\">\n            <div></div>\n            <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                Next: Diagnoses\n                <span>‚Üí</span>\n            </button>\n        </div>\n    </div>\n\n    <!-- Step 2: Diagnoses -->\n    <div class=\"step-content\" id=\"step-2\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">ü©∫</div>\n                    <span>Diagnosis</span>\n                </div>\n                <button class=\"btn btn-secondary\" onclick=\"addDiagnosis()\">\n                    <span>+</span>\n                    Add Diagnosis\n                </button>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\">Search and select diagnosis</label>\n                <select class=\"form-select\" id=\"diagnosis-select\">\n                    <option value=\"\">Select diagnosis from ICD-10 database...</option>\n                    <option value=\"R10.83\">R10.83 - Colic</option>\n                    <option value=\"J06.9\">J06.9 - Acute upper respiratory infection</option>\n                    <option value=\"K29.7\">K29.7 - Gastritis, unspecified</option>\n                    <option value=\"M79.3\">M79.3 - Myalgia</option>\n                    <option value=\"R50.9\">R50.9 - Fever, unspecified</option>\n                    <option value=\"I10\">I10 - Essential hypertension</option>\n                    <option value=\"E11.9\">E11.9 - Type 2 diabetes mellitus</option>\n                </select>\n            </div>\n\n            <table class=\"data-table\">\n                <thead>\n                    <tr>\n                        <th>ICD Code</th>\n                        <th>Description</th>\n                        <th>Type</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"diagnosis-list\"></tbody>\n            </table>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Procedures\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 3: Procedures -->\n    <div class=\"step-content\" id=\"step-3\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üíâ</div>\n                    <span>Claim Procedures</span>\n                </div>\n                <button class=\"btn btn-secondary\" onclick=\"addProcedure()\">\n                    <span>+</span>\n                    Add Procedure\n                </button>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\">Search and select procedure</label>\n                <select class=\"form-select\" id=\"procedure-select\">\n                    <option value=\"\">Select procedure from database...</option>\n                    <option value=\"2964\">2964 - Doctor Examination</option>\n                    <option value=\"3905\">3905 - Intramuscular Injection</option>\n                    <option value=\"4521\">4521 - Blood Test - Complete Blood Count</option>\n                    <option value=\"5123\">5123 - X-Ray Chest PA</option>\n                    <option value=\"6234\">6234 - ECG</option>\n                    <option value=\"7890\">7890 - Ultrasound Abdomen</option>\n                </select>\n            </div>\n\n            <div class=\"input-grid\">\n                <div class=\"input-field\">\n                    <label>Count</label>\n                    <input type=\"number\" id=\"proc-count\" value=\"1\" min=\"1\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Claimed Amount</label>\n                    <input type=\"text\" id=\"proc-amount\" placeholder=\"0.00\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Co-Insurance</label>\n                    <input type=\"text\" id=\"proc-coinsurance\" placeholder=\"0.00\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Net Amount</label>\n                    <input type=\"text\" id=\"proc-net\" placeholder=\"0.00\" readonly />\n                </div>\n            </div>\n\n            <table class=\"data-table\">\n                <thead>\n                    <tr>\n                        <th>Code</th>\n                        <th>Description</th>\n                        <th>Count</th>\n                        <th>Amount</th>\n                        <th>Co-Insurance</th>\n                        <th>Net Amount</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"procedures-list\"></tbody>\n            </table>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üí∞</span>\n                    Financial Summary\n                </div>\n                <div class=\"summary-grid\">\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Claimed</span>\n                        <span class=\"summary-value\" id=\"total-claimed\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Co-Insurance</span>\n                        <span class=\"summary-value danger\" id=\"total-coinsurance\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Net Amount</span>\n                        <span class=\"summary-value success\" id=\"total-net\">0.00 JD</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Visit Plan\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 4: Visit Plan -->\n    <div class=\"step-content\" id=\"step-4\">\n        <!-- Visit Tabs -->\n        <div class=\"visit-tabs\">\n            <div class=\"tabs-header\">\n                <button class=\"tab-btn active\" onclick=\"switchTab(event, 'details')\">Visit Details</button>\n                <button class=\"tab-btn\" onclick=\"switchTab(event, 'plan')\">Visit Plan</button>\n            </div>\n        </div>\n\n        <!-- Visit Plan Section -->\n        <div class=\"visit-plan-section\">\n            <h3 class=\"section-title\">Drugs</h3>\n\n            <!-- Drug Form -->\n            <div class=\"drug-form\">\n                <div class=\"form-row\">\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Drugs</label>\n                        <select class=\"form-select\" id=\"drug-select\">\n                            <option>Select option</option>\n                            <option value=\"panadol\">Panadol - tab (500 mg/1 tab) 96 tab Box</option>\n                            <option value=\"amoxicillin\">Amoxicillin - cap (500 mg) 20 cap Box</option>\n                            <option value=\"ibuprofen\">Ibuprofen - tab (400 mg) 30 tab Box</option>\n                            <option value=\"omeprazole\">Omeprazole - cap (20 mg) 28 cap Box</option>\n                            <option value=\"metformin\">Metformin - tab (500 mg) 60 tab Box</option>\n                        </select>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Unit</label>\n                        <input type=\"text\" class=\"form-input\" id=\"drug-unit\" value=\"0\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Quantity</label>\n                        <input type=\"number\" class=\"form-input\" id=\"drug-quantity\" value=\"1\" min=\"1\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">TQ</label>\n                        <select class=\"form-select\" id=\"drug-tq\">\n                            <option>Select option</option>\n                            <option value=\"Three Times A Day\">Three Times A Day</option>\n                            <option value=\"Twice Daily\">Twice Daily</option>\n                            <option value=\"Once Daily\">Once Daily</option>\n                            <option value=\"As Needed\">As Needed</option>\n                            <option value=\"Every 6 Hours\">Every 6 Hours</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"form-row-small\">\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Count</label>\n                        <input type=\"number\" class=\"form-input\" id=\"drug-count\" value=\"1.5\" step=\"0.5\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Pricing</label>\n                        <input type=\"text\" class=\"form-input\" id=\"drug-pricing\" value=\"0\" />\n                    </div>\n                </div>\n\n                <div class=\"form-group\">\n                    <label class=\"form-label\">Notes</label>\n                    <textarea class=\"form-textarea\" id=\"drug-notes\" placeholder=\"Enter dosage instructions and notes...\"></textarea>\n                </div>\n\n                <div style=\"text-align: right; margin-top: 16px;\">\n                    <button class=\"btn-add-drug\" onclick=\"addDrug()\">Add Drug</button>\n                </div>\n            </div>\n\n            <!-- Table Toolbar -->\n            <div class=\"table-toolbar\">\n                <div class=\"search-box\">\n                    <span>üîç</span>\n                    <input type=\"text\" placeholder=\"Search...\" id=\"search-drugs\" onkeyup=\"searchDrugs()\" />\n                </div>\n                <button class=\"btn-download\" onclick=\"downloadDrugs()\">\n                    <span>‚¨áÔ∏è</span>\n                    Download\n                </button>\n            </div>\n\n            <!-- Drug Table -->\n            <div class=\"table-container\">\n                <table class=\"drug-table\">\n                    <thead>\n                        <tr>\n                            <th>Mp Type</th>\n                            <th>Type</th>\n                            <th>Description E</th>\n                            <th>Description A</th>\n                            <th>Quantity</th>\n                            <th>Unit</th>\n                            <th>TQ</th>\n                            <th>Notes</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody id=\"drug-table-body\"></tbody>\n                </table>\n            </div>\n\n            <!-- Pagination -->\n            <div class=\"pagination\">\n                <div class=\"pagination-info\">\n                    <span id=\"drug-records\">0 Records</span>\n                </div>\n                <div class=\"pagination-controls\">\n                    <button class=\"page-btn\" onclick=\"changePage(-1)\" id=\"prev-page\">‚óÑ</button>\n                    <span style=\"color: #7f8c8d;\">Page</span>\n                    <input type=\"text\" class=\"page-input\" id=\"current-page\" value=\"1\" />\n                    <span style=\"color: #7f8c8d;\">of <span id=\"total-pages\">1</span></span>\n                    <button class=\"page-btn\" onclick=\"changePage(1)\" id=\"next-page\">‚ñ∫</button>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Documents & Notes\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 5: Documents & Notes -->\n    <div class=\"step-content\" id=\"step-5\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üìÑ</div>\n                    <span>Documents</span>\n                </div>\n            </div>\n\n            <div class=\"upload-area\" onclick=\"document.getElementById('file-upload').click()\">\n                <div class=\"upload-icon\">üìÅ</div>\n                <div class=\"upload-text\">Click to upload documents</div>\n                <div class=\"upload-hint\">or drag and drop files here</div>\n                <input type=\"file\" id=\"file-upload\" style=\"display: none;\" multiple onchange=\"handleFileUpload(event)\" />\n            </div>\n\n            <div id=\"uploaded-files\" style=\"margin-top: 20px;\"></div>\n        </div>\n\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üìù</div>\n                    <span>Clinical Notes</span>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Add notes for this visit</label>\n                <textarea class=\"form-textarea\" id=\"clinical-notes\" rows=\"4\" placeholder=\"Enter clinical notes, observations, or special instructions...\"></textarea>\n            </div>\n        </div>\n\n        <div class=\"step-navigation\">\n            <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                <span>‚Üê</span>\n                Back\n            </button>\n            <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                Next: Review & Submit\n                <span>‚Üí</span>\n            </button>\n        </div>\n    </div>\n\n    <!-- Step 6: Send Visit -->\n    <div class=\"step-content\" id=\"step-6\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">‚úÖ</div>\n                    <span>Review Visit Details</span>\n                </div>\n            </div>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üë•</span>\n                    Patient Summary\n                </div>\n                <div class=\"info-grid\">\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Patient Name</span>\n                        <span class=\"info-value\">Fuad Abdullah Hamed Fathee</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Visit Date</span>\n                        <span class=\"info-value\">September 23, 2025</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Diagnoses</span>\n                        <span class=\"info-value\" id=\"review-diagnoses\">0 diagnoses</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Procedures</span>\n                        <span class=\"info-value\" id=\"review-procedures\">0 procedures</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Medications</span>\n                        <span class=\"info-value\" id=\"review-medications\">0 medications</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Documents</span>\n                        <span class=\"info-value\" id=\"review-documents\">0 files</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üí∞</span>\n                    Billing Summary\n                </div>\n                <div class=\"summary-grid\">\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Amount</span>\n                        <span class=\"summary-value\" id=\"review-total\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Insurance Coverage</span>\n                        <span class=\"summary-value success\" id=\"review-coverage\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Patient Co-payment</span>\n                        <span class=\"summary-value danger\" id=\"review-copayment\">0.00 JD</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"alert-card\">\n                <div style=\"display: flex; align-items: center; gap: 12px;\">\n                    <span style=\"font-size: 24px;\">‚ö†Ô∏è</span>\n                    <div>\n                        <div style=\"font-weight: 600; color: #0066cc; margin-bottom: 4px;\">Ready to Submit</div>\n                        <div style=\"font-size: 13px; color: #666;\">Please review all information before submitting. This action cannot be undone.</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back to Documents\n                </button>\n                <button class=\"btn btn-submit\" onclick=\"submitVisit()\">\n                    <span>üöÄ</span>\n                    Submit Visit for Approval\n                </button>\n            </div>\n        </div>\n    </div>\n</div>",
    "js": "// Clinic Management System - JavaScript\n\n// Global Variables\nlet currentStep = 1;\nconst totalSteps = 6;\nlet diagnosesList = [];\nlet proceduresList = [];\nlet drugsList = [];\nlet uploadedFiles = [];\n\n// Drug Database with Arabic translations\nconst drugDatabase = {\n  'panadol': {\n    mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n    type: 'DRUG',\n    descriptionE: 'Panadol - tab (500 mg/1 tab) 96 tab Box',\n    descriptionA: 'ÿ®ŸÜÿßÿØŸàŸÑ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (500 ŸÖÿ∫/1 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ©) 96 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n    defaultUnit: 'Tablet'\n  },\n  'amoxicillin': {\n    mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n    type: 'DRUG',\n    descriptionE: 'Amoxicillin - cap (500 mg) 20 cap Box',\n    descriptionA: 'ÿ£ŸÖŸàŸÉÿ≥Ÿäÿ≥ŸäŸÑŸäŸÜ - ŸÉÿ®ÿ≥ŸàŸÑÿ© (500 ŸÖÿ∫) 20 ŸÉÿ®ÿ≥ŸàŸÑÿ© ÿπŸÑÿ®ÿ©',\n    defaultUnit: 'Capsule'\n  },\n  'ibuprofen': {\n    mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n    type: 'DRUG',\n    descriptionE: 'Ibuprofen - tab (400 mg) 30 tab Box',\n    descriptionA: 'ÿ•Ÿäÿ®Ÿàÿ®ÿ±ŸàŸÅŸäŸÜ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (400 ŸÖÿ∫) 30 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n    defaultUnit: 'Tablet'\n  },\n  'omeprazole': {\n    mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n    type: 'DRUG',\n    descriptionE: 'Omeprazole - cap (20 mg) 28 cap Box',\n    descriptionA: 'ÿ£ŸàŸÖŸäÿ®ÿ±ÿßÿ≤ŸàŸÑ - ŸÉÿ®ÿ≥ŸàŸÑÿ© (20 ŸÖÿ∫) 28 ŸÉÿ®ÿ≥ŸàŸÑÿ© ÿπŸÑÿ®ÿ©',\n    defaultUnit: 'Capsule'\n  },\n  'metformin': {\n    mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n    type: 'DRUG',\n    descriptionE: 'Metformin - tab (500 mg) 60 tab Box',\n    descriptionA: 'ŸÖŸäÿ™ŸÅŸàÿ±ŸÖŸäŸÜ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (500 ŸÖÿ∫) 60 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n    defaultUnit: 'Tablet'\n  }\n};\n\n// Procedure Database\nconst procedureDatabase = {\n  '2964': {\n    name: 'Doctor Examination',\n    price: 75.00\n  },\n  '3905': {\n    name: 'Intramuscular Injection',\n    price: 25.00\n  },\n  '4521': {\n    name: 'Blood Test - Complete Blood Count',\n    price: 45.00\n  },\n  '5123': {\n    name: 'X-Ray Chest PA',\n    price: 60.00\n  },\n  '6234': {\n    name: 'ECG',\n    price: 35.00\n  },\n  '7890': {\n    name: 'Ultrasound Abdomen',\n    price: 120.00\n  }\n};\n\n// Initialize Application\ndocument.addEventListener('DOMContentLoaded', function () {\n  initializeStepper();\n  initializeEventListeners();\n  updateStepper();\n  updateAllSummaries();\n});\n\n// Initialize Event Listeners\nfunction initializeEventListeners() {\n  // Step navigation\n  document.querySelectorAll('.step').forEach(step => {\n    step.addEventListener('click', function () {\n      const stepNumber = parseInt(this.dataset.step);\n      goToStep(stepNumber);\n    });\n  });\n\n  // Procedure amount calculations\n  const procAmount = document.getElementById('proc-amount');\n  const procCoinsurance = document.getElementById('proc-coinsurance');\n  const procNet = document.getElementById('proc-net');\n  if (procAmount && procCoinsurance) {\n    procAmount.addEventListener('input', calculateProcedureNet);\n    procCoinsurance.addEventListener('input', calculateProcedureNet);\n  }\n}\n\n// Stepper Functions\nfunction initializeStepper() {\n  currentStep = 1;\n  updateStepper();\n}\nfunction updateStepper() {\n  // Update step states\n  document.querySelectorAll('.step').forEach((step, index) => {\n    const stepNumber = index + 1;\n    step.classList.remove('active', 'completed');\n    if (stepNumber < currentStep) {\n      step.classList.add('completed');\n    } else if (stepNumber === currentStep) {\n      step.classList.add('active');\n    }\n  });\n\n  // Update progress bar\n  const progress = (currentStep - 1) / (totalSteps - 1) * 100;\n  const progressBar = document.getElementById('stepper-progress');\n  if (progressBar) {\n    progressBar.style.width = `calc(${progress}% - 40px)`;\n  }\n\n  // Update content visibility\n  document.querySelectorAll('.step-content').forEach((content, index) => {\n    const stepNumber = index + 1;\n    content.classList.toggle('active', stepNumber === currentStep);\n  });\n\n  // Update header submit button\n  const headerSubmit = document.getElementById('header-submit');\n  if (headerSubmit) {\n    if (currentStep === totalSteps) {\n      headerSubmit.disabled = false;\n      headerSubmit.innerHTML = '<span>üöÄ</span> Submit for Approval';\n      headerSubmit.onclick = submitVisit;\n    } else {\n      headerSubmit.disabled = true;\n      headerSubmit.innerHTML = '<span>‚úì</span> Send to Approval';\n    }\n  }\n\n  // Update review summary when reaching final step\n  if (currentStep === totalSteps) {\n    updateReviewSummary();\n  }\n}\nfunction nextStep() {\n  if (currentStep < totalSteps) {\n    if (validateStep(currentStep)) {\n      currentStep++;\n      updateStepper();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n  }\n}\nfunction prevStep() {\n  if (currentStep > 1) {\n    currentStep--;\n    updateStepper();\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }\n}\nfunction goToStep(stepNumber) {\n  if (stepNumber >= 1 && stepNumber <= totalSteps) {\n    if (stepNumber <= currentStep) {\n      currentStep = stepNumber;\n      updateStepper();\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n  }\n}\nfunction validateStep(step) {\n  switch (step) {\n    case 1:\n      return true;\n    // Visit details - no specific validation needed\n    case 2:\n      if (diagnosesList.length === 0) {\n        alert('Please add at least one diagnosis before proceeding.');\n        return false;\n      }\n      return true;\n    case 3:\n      if (proceduresList.length === 0) {\n        alert('Please add at least one procedure before proceeding.');\n        return false;\n      }\n      return true;\n    case 4:\n      if (drugsList.length === 0) {\n        alert('Please add at least one medication before proceeding.');\n        return false;\n      }\n      return true;\n    default:\n      return true;\n  }\n}\n\n// Diagnosis Functions\nfunction addDiagnosis() {\n  const select = document.getElementById('diagnosis-select');\n  const selectedOption = select.options[select.selectedIndex];\n  if (selectedOption.value) {\n    const [code, description] = selectedOption.text.split(' - ');\n    const diagnosis = {\n      code: code,\n      description: description,\n      type: diagnosesList.length === 0 ? 'Primary' : 'Secondary',\n      status: 'Active'\n    };\n    diagnosesList.push(diagnosis);\n    const tbody = document.getElementById('diagnosis-list');\n    const newRow = tbody.insertRow();\n    newRow.innerHTML = `\n            <td><span class=\"code-badge\">${code}</span></td>\n            <td>${description}</td>\n            <td>${diagnosis.type}</td>\n            <td><span class=\"status-badge status-active\">${diagnosis.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editDiagnosis(${diagnosesList.length - 1})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteDiagnosis(this, ${diagnosesList.length - 1})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n\n    // Reset select\n    select.value = '';\n  } else {\n    alert('Please select a diagnosis to add');\n  }\n}\nfunction deleteDiagnosis(button, index) {\n  const row = button.closest('tr');\n  row.remove();\n  diagnosesList.splice(index, 1);\n  refreshDiagnosisTable();\n}\nfunction refreshDiagnosisTable() {\n  const tbody = document.getElementById('diagnosis-list');\n  tbody.innerHTML = '';\n  diagnosesList.forEach((diagnosis, index) => {\n    const newRow = tbody.insertRow();\n    newRow.innerHTML = `\n            <td><span class=\"code-badge\">${diagnosis.code}</span></td>\n            <td>${diagnosis.description}</td>\n            <td>${diagnosis.type}</td>\n            <td><span class=\"status-badge status-active\">${diagnosis.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editDiagnosis(${index})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteDiagnosis(this, ${index})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n  });\n}\nfunction editDiagnosis(index) {\n  alert('Edit functionality would open a modal to edit diagnosis at index ' + index);\n}\n\n// Procedure Functions\nfunction addProcedure() {\n  const select = document.getElementById('procedure-select');\n  const selectedOption = select.options[select.selectedIndex];\n  const countInput = document.getElementById('proc-count');\n  const amountInput = document.getElementById('proc-amount');\n  const coinsuranceInput = document.getElementById('proc-coinsurance');\n  if (selectedOption.value) {\n    const [code, description] = selectedOption.text.split(' - ');\n    const procedureData = procedureDatabase[selectedOption.value];\n    const count = parseInt(countInput.value) || 1;\n    const amount = parseFloat(amountInput.value) || procedureData.price;\n    const coinsurance = parseFloat(coinsuranceInput.value) || 1.00;\n    const netAmount = amount - coinsurance;\n    const procedure = {\n      code: code,\n      description: description,\n      count: count,\n      amount: amount,\n      coinsurance: coinsurance,\n      netAmount: netAmount,\n      status: 'Approved'\n    };\n    proceduresList.push(procedure);\n    const tbody = document.getElementById('procedures-list');\n    const newRow = tbody.insertRow();\n    newRow.innerHTML = `\n            <td><span class=\"code-badge\">${code}</span></td>\n            <td>${description}</td>\n            <td>${count}</td>\n            <td>${amount.toFixed(2)} JD</td>\n            <td>${coinsurance.toFixed(2)} JD</td>\n            <td>${netAmount.toFixed(2)} JD</td>\n            <td><span class=\"status-badge status-active\">${procedure.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editProcedure(${proceduresList.length - 1})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteProcedure(this, ${proceduresList.length - 1})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n\n    // Update financial summary\n    updateFinancialSummary();\n\n    // Reset form\n    select.value = '';\n    countInput.value = '1';\n    amountInput.value = '';\n    coinsuranceInput.value = '';\n    document.getElementById('proc-net').value = '';\n  } else {\n    alert('Please select a procedure to add');\n  }\n}\nfunction deleteProcedure(button, index) {\n  const row = button.closest('tr');\n  row.remove();\n  proceduresList.splice(index, 1);\n  updateFinancialSummary();\n}\nfunction editProcedure(index) {\n  alert('Edit functionality would open a modal to edit procedure at index ' + index);\n}\nfunction calculateProcedureNet() {\n  const amountInput = document.getElementById('proc-amount');\n  const coinsuranceInput = document.getElementById('proc-coinsurance');\n  const netInput = document.getElementById('proc-net');\n  const amount = parseFloat(amountInput.value) || 0;\n  const coinsurance = parseFloat(coinsuranceInput.value) || 0;\n  netInput.value = (amount - coinsurance).toFixed(2);\n}\nfunction updateFinancialSummary() {\n  let totalClaimed = 0;\n  let totalCoinsurance = 0;\n  let totalNet = 0;\n  proceduresList.forEach(procedure => {\n    totalClaimed += procedure.amount;\n    totalCoinsurance += procedure.coinsurance;\n    totalNet += procedure.netAmount;\n  });\n  document.getElementById('total-claimed').textContent = totalClaimed.toFixed(2) + ' JD';\n  document.getElementById('total-coinsurance').textContent = totalCoinsurance.toFixed(2) + ' JD';\n  document.getElementById('total-net').textContent = totalNet.toFixed(2) + ' JD';\n}\n\n// Drug Functions\nfunction addDrug() {\n  const drugSelect = document.getElementById('drug-select');\n  const selectedDrug = drugSelect.value;\n  if (selectedDrug && selectedDrug !== 'Select option') {\n    const drug = drugDatabase[selectedDrug];\n    const quantity = document.getElementById('drug-quantity').value || '1';\n    const tq = document.getElementById('drug-tq').value;\n    const notes = document.getElementById('drug-notes').value || '-';\n    const unit = document.getElementById('drug-unit').value || '0';\n    const count = document.getElementById('drug-count').value || '1.5';\n    const pricing = document.getElementById('drug-pricing').value || '0';\n    const drugData = {\n      mpType: drug.mpType,\n      type: drug.type,\n      descriptionE: drug.descriptionE,\n      descriptionA: drug.descriptionA,\n      quantity: quantity,\n      unit: drug.defaultUnit,\n      tq: tq !== 'Select option' ? tq : 'Three Times A Day',\n      notes: notes,\n      unitValue: unit,\n      count: count,\n      pricing: pricing\n    };\n    drugsList.push(drugData);\n    const tbody = document.getElementById('drug-table-body');\n    const newRow = tbody.insertRow();\n    newRow.innerHTML = `\n            <td>${drugData.mpType}</td>\n            <td>${drugData.type}</td>\n            <td>${drugData.descriptionE}</td>\n            <td>${drugData.descriptionA}</td>\n            <td>${drugData.quantity}</td>\n            <td>${drugData.unit}</td>\n            <td>${drugData.tq}</td>\n            <td>${drugData.notes}</td>\n            <td>\n                <button class=\"btn-delete\" onclick=\"deleteDrug(this, ${drugsList.length - 1})\">Delete</button>\n            </td>\n        `;\n\n    // Reset form\n    drugSelect.value = 'Select option';\n    document.getElementById('drug-quantity').value = '1';\n    document.getElementById('drug-tq').value = 'Select option';\n    document.getElementById('drug-notes').value = '';\n    document.getElementById('drug-unit').value = '0';\n    document.getElementById('drug-count').value = '1.5';\n    document.getElementById('drug-pricing').value = '0';\n    updateDrugRecordCount();\n  } else {\n    alert('Please select a drug to add');\n  }\n}\nfunction deleteDrug(button, index) {\n  const row = button.closest('tr');\n  row.remove();\n  drugsList.splice(index, 1);\n  updateDrugRecordCount();\n}\nfunction deleteRow(button) {\n  const row = button.closest('tr');\n  row.remove();\n  updateDrugRecordCount();\n}\nfunction updateDrugRecordCount() {\n  const rowCount = document.getElementById('drug-table-body').rows.length;\n  document.getElementById('drug-records').textContent = `${rowCount} Records`;\n}\nfunction searchDrugs() {\n  const searchTerm = document.getElementById('search-drugs').value.toLowerCase();\n  const rows = document.querySelectorAll('#drug-table-body tr');\n  rows.forEach(row => {\n    const text = row.textContent.toLowerCase();\n    row.style.display = text.includes(searchTerm) ? '' : 'none';\n  });\n}\nfunction downloadDrugs() {\n  // Create CSV content\n  let csvContent = \"Mp Type,Type,Description E,Description A,Quantity,Unit,TQ,Notes\\n\";\n  drugsList.forEach(drug => {\n    csvContent += `\"${drug.mpType}\",\"${drug.type}\",\"${drug.descriptionE}\",\"${drug.descriptionA}\",`;\n    csvContent += `\"${drug.quantity}\",\"${drug.unit}\",\"${drug.tq}\",\"${drug.notes}\"\\n`;\n  });\n\n  // Download CSV file\n  const blob = new Blob([csvContent], {\n    type: 'text/csv;charset=utf-8;'\n  });\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(blob);\n  link.setAttribute('href', url);\n  link.setAttribute('download', 'medications_list.csv');\n  link.style.visibility = 'hidden';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\n// Pagination\nfunction changePage(direction) {\n  const currentPageInput = document.getElementById('current-page');\n  const currentPage = parseInt(currentPageInput.value) || 1;\n  const totalPages = parseInt(document.getElementById('total-pages').textContent) || 1;\n  const newPage = currentPage + direction;\n  if (newPage >= 1 && newPage <= totalPages) {\n    currentPageInput.value = newPage;\n    // Here you would typically load data for the new page\n  }\n}\n\n// Tab Switching\nfunction switchTab(event, tabName) {\n  document.querySelectorAll('.tab-btn').forEach(btn => {\n    btn.classList.remove('active');\n  });\n  event.target.classList.add('active');\n\n  // Here you would show/hide different content based on the tab\n  console.log('Switched to tab:', tabName);\n}\n\n// File Upload\nfunction handleFileUpload(event) {\n  const files = event.target.files;\n  const fileList = document.getElementById('uploaded-files');\n  for (let file of files) {\n    uploadedFiles.push(file);\n    const fileItem = document.createElement('div');\n    fileItem.style.cssText = 'padding: 12px; background: #f8f9fb; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;';\n    fileItem.innerHTML = `\n            <div style=\"display: flex; align-items: center; gap: 8px;\">\n                <span>üìÑ</span>\n                <span style=\"font-size: 14px; color: #1a1a1a;\">${file.name}</span>\n                <span style=\"font-size: 12px; color: #888;\">(${(file.size / 1024).toFixed(2)} KB)</span>\n            </div>\n            <button class=\"btn-icon btn-delete\" onclick=\"removeFile(this, '${file.name}')\">üóëÔ∏è</button>\n        `;\n    fileList.appendChild(fileItem);\n  }\n}\nfunction removeFile(button, filename) {\n  button.parentElement.remove();\n  uploadedFiles = uploadedFiles.filter(file => file.name !== filename);\n}\n\n// Review Summary\nfunction updateReviewSummary() {\n  // Update diagnoses count\n  document.getElementById('review-diagnoses').textContent = diagnosesList.length + (diagnosesList.length === 1 ? ' diagnosis' : ' diagnoses');\n\n  // Update procedures count\n  document.getElementById('review-procedures').textContent = proceduresList.length + (proceduresList.length === 1 ? ' procedure' : ' procedures');\n\n  // Update medications count\n  document.getElementById('review-medications').textContent = drugsList.length + (drugsList.length === 1 ? ' medication' : ' medications');\n\n  // Update documents count\n  document.getElementById('review-documents').textContent = uploadedFiles.length + (uploadedFiles.length === 1 ? ' file' : ' files');\n\n  // Update financial summary\n  let totalAmount = 0;\n  let totalCoinsurance = 0;\n  proceduresList.forEach(procedure => {\n    totalAmount += procedure.amount;\n    totalCoinsurance += procedure.coinsurance;\n  });\n  const coverage = totalAmount - totalCoinsurance;\n  document.getElementById('review-total').textContent = totalAmount.toFixed(2) + ' JD';\n  document.getElementById('review-coverage').textContent = coverage.toFixed(2) + ' JD';\n  document.getElementById('review-copayment').textContent = totalCoinsurance.toFixed(2) + ' JD';\n}\nfunction updateAllSummaries() {\n  updateFinancialSummary();\n  updateDrugRecordCount();\n}\n\n// Save Draft\nfunction saveDraft() {\n  const visitData = {\n    diagnoses: diagnosesList,\n    procedures: proceduresList,\n    drugs: drugsList,\n    files: uploadedFiles.map(f => f.name),\n    notes: document.getElementById('clinical-notes')?.value || '',\n    timestamp: new Date().toISOString()\n  };\n\n  // Save to localStorage or send to server\n  localStorage.setItem('visitDraft', JSON.stringify(visitData));\n  alert('Draft saved successfully!');\n}\n\n// Submit Visit\nfunction submitVisit() {\n  // Validate all required data\n  if (diagnosesList.length === 0) {\n    alert('Please add at least one diagnosis before submitting.');\n    return;\n  }\n  if (proceduresList.length === 0) {\n    alert('Please add at least one procedure before submitting.');\n    return;\n  }\n  const visitData = {\n    patient: {\n      name: 'Fuad Abdullah Hamed Fathee',\n      nationalId: '975555555',\n      visitNumber: '0001',\n      visitDate: 'September 23, 2025'\n    },\n    diagnoses: diagnosesList,\n    procedures: proceduresList,\n    drugs: drugsList,\n    files: uploadedFiles.map(f => f.name),\n    notes: document.getElementById('clinical-notes')?.value || '',\n    submittedAt: new Date().toISOString()\n  };\n\n  // Show loading state\n  const submitBtn = event.target;\n  const originalContent = submitBtn.innerHTML;\n  submitBtn.innerHTML = '<span>‚è≥</span> Submitting...';\n  submitBtn.disabled = true;\n\n  // Simulate API call\n  setTimeout(() => {\n    submitBtn.innerHTML = '<span>‚úÖ</span> Submitted Successfully!';\n    submitBtn.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';\n\n    // Clear draft\n    localStorage.removeItem('visitDraft');\n\n    // Show success message\n    setTimeout(() => {\n      alert('Visit has been successfully submitted for approval!');\n      // Reset form or redirect\n      resetForm();\n    }, 1000);\n  }, 2000);\n}\n\n// Reset Form\nfunction resetForm() {\n  // Reset all arrays\n  diagnosesList = [];\n  proceduresList = [];\n  drugsList = [];\n  uploadedFiles = [];\n\n  // Clear tables\n  document.getElementById('diagnosis-list').innerHTML = '';\n  document.getElementById('procedures-list').innerHTML = '';\n  document.getElementById('drug-table-body').innerHTML = '';\n  document.getElementById('uploaded-files').innerHTML = '';\n\n  // Reset to first step\n  currentStep = 1;\n  updateStepper();\n\n  // Update summaries\n  updateAllSummaries();\n}\n\n// Export functions for AppSmith\nconst ClinicSystem = {\n  // Navigation\n  nextStep,\n  prevStep,\n  goToStep,\n  // Diagnosis\n  addDiagnosis,\n  deleteDiagnosis,\n  editDiagnosis,\n  // Procedures\n  addProcedure,\n  deleteProcedure,\n  editProcedure,\n  calculateProcedureNet,\n  // Drugs\n  addDrug,\n  deleteDrug,\n  searchDrugs,\n  downloadDrugs,\n  // File Management\n  handleFileUpload,\n  removeFile,\n  // Form Actions\n  saveDraft,\n  submitVisit,\n  resetForm,\n  // Tab Management\n  switchTab,\n  // Data\n  diagnosesList,\n  proceduresList,\n  drugsList,\n  uploadedFiles\n};\n\n// Make functions globally available for inline onclick handlers\nwindow.nextStep = nextStep;\nwindow.prevStep = prevStep;\nwindow.goToStep = goToStep;\nwindow.addDiagnosis = addDiagnosis;\nwindow.deleteDiagnosis = deleteDiagnosis;\nwindow.editDiagnosis = editDiagnosis;\nwindow.addProcedure = addProcedure;\nwindow.deleteProcedure = deleteProcedure;\nwindow.editProcedure = editProcedure;\nwindow.addDrug = addDrug;\nwindow.deleteDrug = deleteDrug;\nwindow.deleteRow = deleteRow;\nwindow.searchDrugs = searchDrugs;\nwindow.downloadDrugs = downloadDrugs;\nwindow.handleFileUpload = handleFileUpload;\nwindow.removeFile = removeFile;\nwindow.saveDraft = saveDraft;\nwindow.submitVisit = submitVisit;\nwindow.switchTab = switchTab;\nwindow.changePage = changePage;"
  },
  "theme": "{{appsmith.theme}}",
  "topRow": 0,
  "type": "CUSTOM_WIDGET",
  "uncompiledSrcDoc": {
    "css": "/* Clinic Management System - CSS Styles */\n\n/* Reset and Base Styles */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    background-color: #f5f6fa;\n    color: #2c3e50;\n    line-height: 1.5;\n}\n\n/* Top Header Bar */\n.top-header {\n    background: white;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n    padding: 16px 32px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: sticky;\n    top: 0;\n    z-index: 100;\n}\n\n.page-title {\n    font-size: 24px;\n    font-weight: 600;\n    color: #2c3e50;\n}\n\n.header-actions {\n    display: flex;\n    gap: 12px;\n}\n\n/* Button Styles */\n.btn {\n    padding: 10px 20px;\n    border-radius: 8px;\n    border: none;\n    font-family: 'Inter', sans-serif;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: inline-flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.btn-secondary {\n    background: #f5f6f8;\n    color: #4a4a4a;\n    border: 1px solid #e0e0e0;\n}\n\n.btn-secondary:hover {\n    background: #e8eaed;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n}\n\n.btn-primary:hover {\n    filter: brightness(1.1);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.btn-primary:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n}\n\n.btn-back {\n    background: white;\n    border: 1px solid #d1d5db;\n    color: #7f8c8d;\n}\n\n.btn-back:hover {\n    border-color: #667eea;\n    color: #667eea;\n    background: #f0f4ff;\n}\n\n.btn-next {\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n}\n\n.btn-submit {\n    background: linear-gradient(135deg, #27ae60, #2ecc71);\n    color: white;\n}\n\n.btn-submit:hover {\n    box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);\n}\n\n.btn-add-drug {\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n    padding: 8px 20px;\n    border-radius: 6px;\n    border: none;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.btn-add-drug:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.btn-delete {\n    background: transparent;\n    border: none;\n    color: #e74c3c;\n    cursor: pointer;\n    font-size: 14px;\n    padding: 4px 8px;\n    border-radius: 4px;\n    transition: all 0.2s ease;\n}\n\n.btn-delete:hover {\n    background: #fee;\n    color: #c0392b;\n}\n\n.btn-icon {\n    width: 36px;\n    height: 36px;\n    border-radius: 8px;\n    border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    font-size: 16px;\n}\n\n.btn-edit {\n    background: #e8f4ff;\n    color: #0066cc;\n}\n\n.btn-edit:hover {\n    background: #0066cc;\n    color: white;\n}\n\n.btn-download {\n    background: white;\n    border: 1px solid #d1d5db;\n    padding: 8px 16px;\n    border-radius: 6px;\n    color: #7f8c8d;\n    font-size: 14px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    transition: all 0.2s ease;\n}\n\n.btn-download:hover {\n    background: #f8f9fa;\n    border-color: #667eea;\n    color: #667eea;\n}\n\n/* Stepper Component */\n.stepper-container {\n    background: white;\n    padding: 20px 32px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n}\n\n.stepper {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: relative;\n    max-width: 1400px;\n    margin: 0 auto;\n}\n\n.stepper::before {\n    content: '';\n    position: absolute;\n    top: 24px;\n    left: 40px;\n    right: 40px;\n    height: 2px;\n    background: #e0e0e0;\n    z-index: 0;\n}\n\n.stepper-progress {\n    position: absolute;\n    top: 24px;\n    left: 40px;\n    height: 2px;\n    background: linear-gradient(90deg, #667eea, #764ba2);\n    z-index: 1;\n    transition: width 0.3s ease;\n    width: 0;\n}\n\n.step {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    z-index: 2;\n    cursor: pointer;\n    flex: 1;\n    max-width: 180px;\n}\n\n.step-circle {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    background: white;\n    border: 2px solid #e0e0e0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: 600;\n    font-size: 16px;\n    color: #888;\n    transition: all 0.3s ease;\n    position: relative;\n}\n\n.step.active .step-circle {\n    border-color: #667eea;\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    color: white;\n    transform: scale(1.1);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n.step.completed .step-circle {\n    background: #48bb78;\n    border-color: #48bb78;\n    color: white;\n}\n\n.step.completed .step-circle::after {\n    content: '‚úì';\n    position: absolute;\n    font-size: 20px;\n}\n\n.step.completed .step-number {\n    display: none;\n}\n\n.step-label {\n    margin-top: 12px;\n    font-size: 13px;\n    font-weight: 500;\n    color: #888;\n    text-align: center;\n    transition: color 0.3s ease;\n}\n\n.step.active .step-label {\n    color: #667eea;\n    font-weight: 600;\n}\n\n.step.completed .step-label {\n    color: #48bb78;\n}\n\n.step-description {\n    font-size: 11px;\n    color: #aaa;\n    margin-top: 4px;\n    text-align: center;\n}\n\n/* Main Container */\n.main-container {\n    max-width: 1400px;\n    margin: 24px auto;\n    padding: 0 32px;\n}\n\n/* Content Sections */\n.step-content {\n    display: none;\n    animation: fadeIn 0.3s ease;\n}\n\n.step-content.active {\n    display: block;\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n/* Patient Card */\n.patient-card {\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n    padding: 24px;\n    margin-bottom: 24px;\n}\n\n.patient-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 20px;\n}\n\n.patient-info {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n}\n\n.patient-avatar {\n    width: 60px;\n    height: 60px;\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    border-radius: 50%;\n    color: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 20px;\n    font-weight: 600;\n    flex-shrink: 0;\n}\n\n.patient-details h3 {\n    font-size: 18px;\n    font-weight: 300;\n    color: #2c3e50;\n    margin-bottom: 4px;\n}\n\n.patient-details p {\n    font-size: 14px;\n    color: #7f8c8d;\n}\n\n.status-badge {\n    padding: 6px 16px;\n    border-radius: 20px;\n    font-size: 13px;\n    font-weight: 300;\n}\n\n.status-active {\n    background: #e7f6ed;\n    color: #27ae60;\n}\n\n.divider {\n    border-top: 1px solid #f0f0f0;\n    margin: 16px 0 20px;\n}\n\n/* Info Grid */\n.info-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 16px 24px;\n}\n\n.info-item {\n    display: flex;\n    flex-direction: column;\n}\n\n.info-label {\n    font-size: 12px;\n    color: #888;\n    letter-spacing: 0.4px;\n    margin-bottom: 4px;\n    text-transform: uppercase;\n}\n\n.info-value {\n    font-size: 15px;\n    font-weight: 300;\n    color: #1a1a1a;\n}\n\n/* Section Cards */\n.section-card {\n    background: white;\n    border-radius: 12px;\n    padding: 24px;\n    margin-bottom: 24px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n.section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24px;\n}\n\n.section-title {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #1a1a1a;\n}\n\n.section-icon {\n    width: 32px;\n    height: 32px;\n    background: linear-gradient(135deg, #f5f6f8, #e8eaed);\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 16px;\n}\n\n/* Visit Tabs */\n.visit-tabs {\n    background: white;\n    border-radius: 12px;\n    padding: 16px;\n    margin-bottom: 24px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n.tabs-header {\n    display: flex;\n    gap: 4px;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.tab-btn {\n    padding: 12px 24px;\n    background: transparent;\n    border: none;\n    border-bottom: 2px solid transparent;\n    color: #7f8c8d;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    font-family: 'Inter', sans-serif;\n}\n\n.tab-btn:hover {\n    color: #2c3e50;\n}\n\n.tab-btn.active {\n    color: #667eea;\n    border-bottom-color: #667eea;\n}\n\n/* Visit Plan Section */\n.visit-plan-section {\n    background: white;\n    border-radius: 12px;\n    padding: 24px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n/* Forms */\n.form-group {\n    margin-bottom: 20px;\n}\n\n.form-label {\n    display: block;\n    font-size: 13px;\n    color: #6e6e6e;\n    margin-bottom: 8px;\n    font-weight: 500;\n}\n\n.form-select, .form-input, .form-textarea {\n    width: 100%;\n    padding: 12px 16px;\n    border: 1.5px solid #e8eaed;\n    border-radius: 10px;\n    font-family: 'Inter', sans-serif;\n    font-size: 14px;\n    color: #1a1a1a;\n    background: white;\n    transition: all 0.2s ease;\n}\n\n.form-textarea {\n    resize: vertical;\n    min-height: 100px;\n}\n\n.form-select:focus, .form-input:focus, .form-textarea:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n/* Drug Form */\n.drug-form {\n    background: #f8f9fa;\n    border-radius: 8px;\n    padding: 20px;\n    margin-bottom: 24px;\n}\n\n.form-row {\n    display: grid;\n    grid-template-columns: 2fr 1fr 1fr 2fr;\n    gap: 16px;\n    margin-bottom: 16px;\n}\n\n.form-row-small {\n    display: grid;\n    grid-template-columns: 100px 100px;\n    gap: 16px;\n    margin-bottom: 16px;\n}\n\n/* Input Grid */\n.input-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n    gap: 16px;\n    margin-top: 20px;\n    padding: 20px;\n    background: #f8f9fb;\n    border-radius: 12px;\n}\n\n.input-field {\n    display: flex;\n    flex-direction: column;\n}\n\n.input-field label {\n    font-size: 12px;\n    color: #6e6e6e;\n    margin-bottom: 6px;\n    font-weight: 500;\n    text-transform: uppercase;\n    letter-spacing: 0.3px;\n}\n\n.input-field input {\n    padding: 10px 12px;\n    border: 1.5px solid #e8eaed;\n    border-radius: 8px;\n    font-size: 14px;\n    font-family: 'Inter', sans-serif;\n    background: white;\n}\n\n.input-field input:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n/* Tables */\n.table-container {\n    overflow-x: auto;\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n}\n\n.data-table, .drug-table {\n    width: 100%;\n    border-collapse: separate;\n    border-spacing: 0;\n}\n\n.data-table thead, .drug-table thead {\n    background: #f8f9fb;\n}\n\n.data-table th, .drug-table th {\n    padding: 12px 16px;\n    text-align: left;\n    font-size: 12px;\n    font-weight: 300;\n    color: #6e6e6e;\n    text-transform: uppercase;\n    letter-spacing: 0.4px;\n    border-bottom: 1px solid #e8eaed;\n    white-space: nowrap;\n}\n\n.data-table td, .drug-table td {\n    padding: 16px;\n    font-size: 14px;\n    color: #1a1a1a;\n    border-bottom: 1px solid #f0f0f0;\n}\n\n.data-table tbody tr:hover, .drug-table tbody tr:hover {\n    background-color: #fafbfc;\n}\n\n.data-table tbody tr:last-child td, .drug-table tbody tr:last-child td {\n    border-bottom: none;\n}\n\n/* Table Toolbar */\n.table-toolbar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16px;\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 8px;\n}\n\n.search-box {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    background: white;\n    padding: 8px 12px;\n    border-radius: 6px;\n    border: 1px solid #d1d5db;\n    width: 250px;\n}\n\n.search-box input {\n    border: none;\n    outline: none;\n    font-size: 14px;\n    width: 100%;\n    font-family: 'Inter', sans-serif;\n}\n\n/* Pagination */\n.pagination {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 16px;\n    padding-top: 16px;\n    border-top: 1px solid #e0e0e0;\n}\n\n.pagination-info {\n    font-size: 14px;\n    color: #7f8c8d;\n}\n\n.pagination-controls {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.page-btn {\n    padding: 6px 12px;\n    border: 1px solid #d1d5db;\n    background: white;\n    border-radius: 4px;\n    color: #7f8c8d;\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.page-btn:hover:not(:disabled) {\n    border-color: #667eea;\n    color: #667eea;\n    background: #f0f4ff;\n}\n\n.page-btn:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n.page-input {\n    width: 50px;\n    padding: 6px 8px;\n    border: 1px solid #d1d5db;\n    border-radius: 4px;\n    text-align: center;\n    font-size: 14px;\n}\n\n/* Code Badge */\n.code-badge {\n    display: inline-flex;\n    padding: 4px 10px;\n    background: #f0f1f3;\n    color: #1a1a1a;\n    border-radius: 6px;\n    font-size: 13px;\n    font-weight: 300;\n    font-family: 'Monaco', 'Courier New', monospace;\n}\n\n/* Action Buttons */\n.action-buttons {\n    display: flex;\n    gap: 8px;\n}\n\n/* Upload Area */\n.upload-area {\n    border: 2px dashed #d0d3d8;\n    border-radius: 12px;\n    padding: 32px;\n    text-align: center;\n    background: #fafbfc;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.upload-area:hover {\n    border-color: #667eea;\n    background: rgba(102, 126, 234, 0.05);\n}\n\n.upload-icon {\n    font-size: 48px;\n    margin-bottom: 12px;\n    opacity: 0.5;\n}\n\n.upload-text {\n    color: #6e6e6e;\n    font-size: 14px;\n    margin-bottom: 8px;\n}\n\n.upload-hint {\n    color: #aaa;\n    font-size: 12px;\n}\n\n/* Summary Cards */\n.summary-card {\n    background: linear-gradient(135deg, #f8f9fa, #ffffff);\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    padding: 20px;\n    margin-top: 24px;\n}\n\n.summary-title {\n    font-size: 15px;\n    font-weight: 600;\n    color: #2c3e50;\n    margin-bottom: 16px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.summary-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 16px;\n}\n\n.summary-item {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px;\n    background: white;\n    border-radius: 6px;\n    border: 1px solid #f0f0f0;\n}\n\n.summary-label {\n    font-size: 13px;\n    color: #7f8c8d;\n}\n\n.summary-value {\n    font-size: 14px;\n    font-weight: 300;\n    color: #2c3e50;\n}\n\n.summary-value.success {\n    color: #27ae60;\n}\n\n.summary-value.danger {\n    color: #e74c3c;\n}\n\n/* Alert Card */\n.alert-card {\n    background: #f0f8ff;\n    border: 1px solid #0066cc;\n    border-radius: 8px;\n    padding: 20px;\n    margin-bottom: 24px;\n}\n\n/* Navigation */\n.step-navigation {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 24px 0;\n    margin-top: 32px;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n    .stepper {\n        flex-wrap: wrap;\n    }\n    \n    .step-label {\n        font-size: 11px;\n    }\n    \n    .step-description {\n        display: none;\n    }\n    \n    .form-row {\n        grid-template-columns: 1fr;\n    }\n    \n    .info-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .summary-grid {\n        grid-template-columns: 1fr;\n    }\n}",
    "html": "<!-- Clinic Management System - HTML Structure -->\n<!-- Top Header -->\n<header class=\"top-header\">\n    <h1 class=\"page-title\">Patient Visit Management</h1>\n    <div class=\"header-actions\">\n        <button class=\"btn btn-secondary\" onclick=\"saveDraft()\">\n            <span>üíæ</span>\n            Save Draft\n        </button>\n        <button class=\"btn btn-primary\" id=\"header-submit\" disabled>\n            <span>‚úì</span>\n            Send to Approval\n        </button>\n    </div>\n</header>\n\n<!-- Stepper Component -->\n<div class=\"stepper-container\">\n    <div class=\"stepper\">\n        <div class=\"stepper-progress\" id=\"stepper-progress\"></div>\n        \n        <div class=\"step active\" data-step=\"1\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">1</span>\n            </div>\n            <div class=\"step-label\">Visit Details</div>\n            <div class=\"step-description\">Patient information</div>\n        </div>\n\n        <div class=\"step\" data-step=\"2\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">2</span>\n            </div>\n            <div class=\"step-label\">Diagnoses</div>\n            <div class=\"step-description\">ICD-10 codes</div>\n        </div>\n\n        <div class=\"step\" data-step=\"3\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">3</span>\n            </div>\n            <div class=\"step-label\">Procedures</div>\n            <div class=\"step-description\">Claim procedures</div>\n        </div>\n\n        <div class=\"step\" data-step=\"4\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">4</span>\n            </div>\n            <div class=\"step-label\">Visit Plan</div>\n            <div class=\"step-description\">Medications</div>\n        </div>\n\n        <div class=\"step\" data-step=\"5\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">5</span>\n            </div>\n            <div class=\"step-label\">Documents & Notes</div>\n            <div class=\"step-description\">Attachments</div>\n        </div>\n\n        <div class=\"step\" data-step=\"6\">\n            <div class=\"step-circle\">\n                <span class=\"step-number\">6</span>\n            </div>\n            <div class=\"step-label\">Send Visit</div>\n            <div class=\"step-description\">Review & submit</div>\n        </div>\n    </div>\n</div>\n\n<!-- Main Container -->\n<div class=\"main-container\">\n\n    <!-- Step 1: Visit Details -->\n    <div class=\"step-content active\" id=\"step-1\">\n        <div class=\"patient-card\">\n            <div class=\"patient-header\">\n                <div class=\"patient-info\">\n                    <div class=\"patient-avatar\">FA</div>\n                    <div class=\"patient-details\">\n                        <h3>Fuad Abdullah Hamed Fathee</h3>\n                        <p>National ID: 975555555 ‚Ä¢ Contact: 0792536333</p>\n                    </div>\n                </div>\n                <span class=\"status-badge status-active\">Active Visit</span>\n            </div>\n            <div class=\"divider\"></div>\n            <div class=\"info-grid\">\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Visit Number</span>\n                    <span class=\"info-value\">0001</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Visit Date</span>\n                    <span class=\"info-value\">September 23, 2025</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Risk Carrier</span>\n                    <span class=\"info-value\">Risk Carrier Testing</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Attending Doctor</span>\n                    <span class=\"info-value\">Dr. Ameen Ibrahim Ahmad</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Speciality</span>\n                    <span class=\"info-value\">General Practitioner</span>\n                </div>\n                <div class=\"info-item\">\n                    <span class=\"info-label\">Head of Family</span>\n                    <span class=\"info-value\">Self</span>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üè•</div>\n                    <span>Additional Visit Information</span>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Visit Type</label>\n                <select class=\"form-select\">\n                    <option>Consultation</option>\n                    <option>Follow-up</option>\n                    <option>Emergency</option>\n                    <option>Routine Check-up</option>\n                </select>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Chief Complaint</label>\n                <textarea class=\"form-textarea\" placeholder=\"Enter the patient's chief complaint...\"></textarea>\n            </div>\n        </div>\n\n        <div class=\"step-navigation\">\n            <div></div>\n            <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                Next: Diagnoses\n                <span>‚Üí</span>\n            </button>\n        </div>\n    </div>\n\n    <!-- Step 2: Diagnoses -->\n    <div class=\"step-content\" id=\"step-2\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">ü©∫</div>\n                    <span>Diagnosis</span>\n                </div>\n                <button class=\"btn btn-secondary\" onclick=\"addDiagnosis()\">\n                    <span>+</span>\n                    Add Diagnosis\n                </button>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\">Search and select diagnosis</label>\n                <select class=\"form-select\" id=\"diagnosis-select\">\n                    <option value=\"\">Select diagnosis from ICD-10 database...</option>\n                    <option value=\"R10.83\">R10.83 - Colic</option>\n                    <option value=\"J06.9\">J06.9 - Acute upper respiratory infection</option>\n                    <option value=\"K29.7\">K29.7 - Gastritis, unspecified</option>\n                    <option value=\"M79.3\">M79.3 - Myalgia</option>\n                    <option value=\"R50.9\">R50.9 - Fever, unspecified</option>\n                    <option value=\"I10\">I10 - Essential hypertension</option>\n                    <option value=\"E11.9\">E11.9 - Type 2 diabetes mellitus</option>\n                </select>\n            </div>\n\n            <table class=\"data-table\">\n                <thead>\n                    <tr>\n                        <th>ICD Code</th>\n                        <th>Description</th>\n                        <th>Type</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"diagnosis-list\"></tbody>\n            </table>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Procedures\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 3: Procedures -->\n    <div class=\"step-content\" id=\"step-3\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üíâ</div>\n                    <span>Claim Procedures</span>\n                </div>\n                <button class=\"btn btn-secondary\" onclick=\"addProcedure()\">\n                    <span>+</span>\n                    Add Procedure\n                </button>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\">Search and select procedure</label>\n                <select class=\"form-select\" id=\"procedure-select\">\n                    <option value=\"\">Select procedure from database...</option>\n                    <option value=\"2964\">2964 - Doctor Examination</option>\n                    <option value=\"3905\">3905 - Intramuscular Injection</option>\n                    <option value=\"4521\">4521 - Blood Test - Complete Blood Count</option>\n                    <option value=\"5123\">5123 - X-Ray Chest PA</option>\n                    <option value=\"6234\">6234 - ECG</option>\n                    <option value=\"7890\">7890 - Ultrasound Abdomen</option>\n                </select>\n            </div>\n\n            <div class=\"input-grid\">\n                <div class=\"input-field\">\n                    <label>Count</label>\n                    <input type=\"number\" id=\"proc-count\" value=\"1\" min=\"1\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Claimed Amount</label>\n                    <input type=\"text\" id=\"proc-amount\" placeholder=\"0.00\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Co-Insurance</label>\n                    <input type=\"text\" id=\"proc-coinsurance\" placeholder=\"0.00\" />\n                </div>\n                <div class=\"input-field\">\n                    <label>Net Amount</label>\n                    <input type=\"text\" id=\"proc-net\" placeholder=\"0.00\" readonly />\n                </div>\n            </div>\n\n            <table class=\"data-table\">\n                <thead>\n                    <tr>\n                        <th>Code</th>\n                        <th>Description</th>\n                        <th>Count</th>\n                        <th>Amount</th>\n                        <th>Co-Insurance</th>\n                        <th>Net Amount</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                </thead>\n                <tbody id=\"procedures-list\"></tbody>\n            </table>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üí∞</span>\n                    Financial Summary\n                </div>\n                <div class=\"summary-grid\">\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Claimed</span>\n                        <span class=\"summary-value\" id=\"total-claimed\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Co-Insurance</span>\n                        <span class=\"summary-value danger\" id=\"total-coinsurance\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Net Amount</span>\n                        <span class=\"summary-value success\" id=\"total-net\">0.00 JD</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Visit Plan\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 4: Visit Plan -->\n    <div class=\"step-content\" id=\"step-4\">\n        <!-- Visit Tabs -->\n        <div class=\"visit-tabs\">\n            <div class=\"tabs-header\">\n                <button class=\"tab-btn active\" onclick=\"switchTab(event, 'details')\">Visit Details</button>\n                <button class=\"tab-btn\" onclick=\"switchTab(event, 'plan')\">Visit Plan</button>\n            </div>\n        </div>\n\n        <!-- Visit Plan Section -->\n        <div class=\"visit-plan-section\">\n            <h3 class=\"section-title\">Drugs</h3>\n\n            <!-- Drug Form -->\n            <div class=\"drug-form\">\n                <div class=\"form-row\">\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Drugs</label>\n                        <select class=\"form-select\" id=\"drug-select\">\n                            <option>Select option</option>\n                            <option value=\"panadol\">Panadol - tab (500 mg/1 tab) 96 tab Box</option>\n                            <option value=\"amoxicillin\">Amoxicillin - cap (500 mg) 20 cap Box</option>\n                            <option value=\"ibuprofen\">Ibuprofen - tab (400 mg) 30 tab Box</option>\n                            <option value=\"omeprazole\">Omeprazole - cap (20 mg) 28 cap Box</option>\n                            <option value=\"metformin\">Metformin - tab (500 mg) 60 tab Box</option>\n                        </select>\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Unit</label>\n                        <input type=\"text\" class=\"form-input\" id=\"drug-unit\" value=\"0\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Quantity</label>\n                        <input type=\"number\" class=\"form-input\" id=\"drug-quantity\" value=\"1\" min=\"1\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">TQ</label>\n                        <select class=\"form-select\" id=\"drug-tq\">\n                            <option>Select option</option>\n                            <option value=\"Three Times A Day\">Three Times A Day</option>\n                            <option value=\"Twice Daily\">Twice Daily</option>\n                            <option value=\"Once Daily\">Once Daily</option>\n                            <option value=\"As Needed\">As Needed</option>\n                            <option value=\"Every 6 Hours\">Every 6 Hours</option>\n                        </select>\n                    </div>\n                </div>\n\n                <div class=\"form-row-small\">\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Count</label>\n                        <input type=\"number\" class=\"form-input\" id=\"drug-count\" value=\"1.5\" step=\"0.5\" />\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"form-label\">Pricing</label>\n                        <input type=\"text\" class=\"form-input\" id=\"drug-pricing\" value=\"0\" />\n                    </div>\n                </div>\n\n                <div class=\"form-group\">\n                    <label class=\"form-label\">Notes</label>\n                    <textarea class=\"form-textarea\" id=\"drug-notes\" placeholder=\"Enter dosage instructions and notes...\"></textarea>\n                </div>\n\n                <div style=\"text-align: right; margin-top: 16px;\">\n                    <button class=\"btn-add-drug\" onclick=\"addDrug()\">Add Drug</button>\n                </div>\n            </div>\n\n            <!-- Table Toolbar -->\n            <div class=\"table-toolbar\">\n                <div class=\"search-box\">\n                    <span>üîç</span>\n                    <input type=\"text\" placeholder=\"Search...\" id=\"search-drugs\" onkeyup=\"searchDrugs()\" />\n                </div>\n                <button class=\"btn-download\" onclick=\"downloadDrugs()\">\n                    <span>‚¨áÔ∏è</span>\n                    Download\n                </button>\n            </div>\n\n            <!-- Drug Table -->\n            <div class=\"table-container\">\n                <table class=\"drug-table\">\n                    <thead>\n                        <tr>\n                            <th>Mp Type</th>\n                            <th>Type</th>\n                            <th>Description E</th>\n                            <th>Description A</th>\n                            <th>Quantity</th>\n                            <th>Unit</th>\n                            <th>TQ</th>\n                            <th>Notes</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody id=\"drug-table-body\"></tbody>\n                </table>\n            </div>\n\n            <!-- Pagination -->\n            <div class=\"pagination\">\n                <div class=\"pagination-info\">\n                    <span id=\"drug-records\">0 Records</span>\n                </div>\n                <div class=\"pagination-controls\">\n                    <button class=\"page-btn\" onclick=\"changePage(-1)\" id=\"prev-page\">‚óÑ</button>\n                    <span style=\"color: #7f8c8d;\">Page</span>\n                    <input type=\"text\" class=\"page-input\" id=\"current-page\" value=\"1\" />\n                    <span style=\"color: #7f8c8d;\">of <span id=\"total-pages\">1</span></span>\n                    <button class=\"page-btn\" onclick=\"changePage(1)\" id=\"next-page\">‚ñ∫</button>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back\n                </button>\n                <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                    Next: Documents & Notes\n                    <span>‚Üí</span>\n                </button>\n            </div>\n        </div>\n    </div>\n\n    <!-- Step 5: Documents & Notes -->\n    <div class=\"step-content\" id=\"step-5\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üìÑ</div>\n                    <span>Documents</span>\n                </div>\n            </div>\n\n            <div class=\"upload-area\" onclick=\"document.getElementById('file-upload').click()\">\n                <div class=\"upload-icon\">üìÅ</div>\n                <div class=\"upload-text\">Click to upload documents</div>\n                <div class=\"upload-hint\">or drag and drop files here</div>\n                <input type=\"file\" id=\"file-upload\" style=\"display: none;\" multiple onchange=\"handleFileUpload(event)\" />\n            </div>\n\n            <div id=\"uploaded-files\" style=\"margin-top: 20px;\"></div>\n        </div>\n\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">üìù</div>\n                    <span>Clinical Notes</span>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label class=\"form-label\">Add notes for this visit</label>\n                <textarea class=\"form-textarea\" id=\"clinical-notes\" rows=\"4\" placeholder=\"Enter clinical notes, observations, or special instructions...\"></textarea>\n            </div>\n        </div>\n\n        <div class=\"step-navigation\">\n            <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                <span>‚Üê</span>\n                Back\n            </button>\n            <button class=\"btn btn-next\" onclick=\"nextStep()\">\n                Next: Review & Submit\n                <span>‚Üí</span>\n            </button>\n        </div>\n    </div>\n\n    <!-- Step 6: Send Visit -->\n    <div class=\"step-content\" id=\"step-6\">\n        <div class=\"section-card\">\n            <div class=\"section-header\">\n                <div class=\"section-title\">\n                    <div class=\"section-icon\">‚úÖ</div>\n                    <span>Review Visit Details</span>\n                </div>\n            </div>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üë•</span>\n                    Patient Summary\n                </div>\n                <div class=\"info-grid\">\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Patient Name</span>\n                        <span class=\"info-value\">Fuad Abdullah Hamed Fathee</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Visit Date</span>\n                        <span class=\"info-value\">September 23, 2025</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Diagnoses</span>\n                        <span class=\"info-value\" id=\"review-diagnoses\">0 diagnoses</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Procedures</span>\n                        <span class=\"info-value\" id=\"review-procedures\">0 procedures</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Medications</span>\n                        <span class=\"info-value\" id=\"review-medications\">0 medications</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"info-label\">Documents</span>\n                        <span class=\"info-value\" id=\"review-documents\">0 files</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"summary-card\">\n                <div class=\"summary-title\">\n                    <span>üí∞</span>\n                    Billing Summary\n                </div>\n                <div class=\"summary-grid\">\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Total Amount</span>\n                        <span class=\"summary-value\" id=\"review-total\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Insurance Coverage</span>\n                        <span class=\"summary-value success\" id=\"review-coverage\">0.00 JD</span>\n                    </div>\n                    <div class=\"summary-item\">\n                        <span class=\"summary-label\">Patient Co-payment</span>\n                        <span class=\"summary-value danger\" id=\"review-copayment\">0.00 JD</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"alert-card\">\n                <div style=\"display: flex; align-items: center; gap: 12px;\">\n                    <span style=\"font-size: 24px;\">‚ö†Ô∏è</span>\n                    <div>\n                        <div style=\"font-weight: 600; color: #0066cc; margin-bottom: 4px;\">Ready to Submit</div>\n                        <div style=\"font-size: 13px; color: #666;\">Please review all information before submitting. This action cannot be undone.</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"step-navigation\">\n                <button class=\"btn btn-back\" onclick=\"prevStep()\">\n                    <span>‚Üê</span>\n                    Back to Documents\n                </button>\n                <button class=\"btn btn-submit\" onclick=\"submitVisit()\">\n                    <span>üöÄ</span>\n                    Submit Visit for Approval\n                </button>\n            </div>\n        </div>\n    </div>\n</div>",
    "js": "// Clinic Management System - JavaScript\n\n// Global Variables\nlet currentStep = 1;\nconst totalSteps = 6;\nlet diagnosesList = [];\nlet proceduresList = [];\nlet drugsList = [];\nlet uploadedFiles = [];\n\n// Drug Database with Arabic translations\nconst drugDatabase = {\n    'panadol': {\n        mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n        type: 'DRUG',\n        descriptionE: 'Panadol - tab (500 mg/1 tab) 96 tab Box',\n        descriptionA: 'ÿ®ŸÜÿßÿØŸàŸÑ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (500 ŸÖÿ∫/1 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ©) 96 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n        defaultUnit: 'Tablet'\n    },\n    'amoxicillin': {\n        mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n        type: 'DRUG',\n        descriptionE: 'Amoxicillin - cap (500 mg) 20 cap Box',\n        descriptionA: 'ÿ£ŸÖŸàŸÉÿ≥Ÿäÿ≥ŸäŸÑŸäŸÜ - ŸÉÿ®ÿ≥ŸàŸÑÿ© (500 ŸÖÿ∫) 20 ŸÉÿ®ÿ≥ŸàŸÑÿ© ÿπŸÑÿ®ÿ©',\n        defaultUnit: 'Capsule'\n    },\n    'ibuprofen': {\n        mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n        type: 'DRUG',\n        descriptionE: 'Ibuprofen - tab (400 mg) 30 tab Box',\n        descriptionA: 'ÿ•Ÿäÿ®Ÿàÿ®ÿ±ŸàŸÅŸäŸÜ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (400 ŸÖÿ∫) 30 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n        defaultUnit: 'Tablet'\n    },\n    'omeprazole': {\n        mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n        type: 'DRUG',\n        descriptionE: 'Omeprazole - cap (20 mg) 28 cap Box',\n        descriptionA: 'ÿ£ŸàŸÖŸäÿ®ÿ±ÿßÿ≤ŸàŸÑ - ŸÉÿ®ÿ≥ŸàŸÑÿ© (20 ŸÖÿ∫) 28 ŸÉÿ®ÿ≥ŸàŸÑÿ© ÿπŸÑÿ®ÿ©',\n        defaultUnit: 'Capsule'\n    },\n    'metformin': {\n        mpType: 'ÿµŸäÿØŸÑŸäÿ©',\n        type: 'DRUG',\n        descriptionE: 'Metformin - tab (500 mg) 60 tab Box',\n        descriptionA: 'ŸÖŸäÿ™ŸÅŸàÿ±ŸÖŸäŸÜ - ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© (500 ŸÖÿ∫) 60 ŸÖÿ∂ÿ∫Ÿàÿ∑ÿ© ÿπŸÑÿ®ÿ©',\n        defaultUnit: 'Tablet'\n    }\n};\n\n// Procedure Database\nconst procedureDatabase = {\n    '2964': { name: 'Doctor Examination', price: 75.00 },\n    '3905': { name: 'Intramuscular Injection', price: 25.00 },\n    '4521': { name: 'Blood Test - Complete Blood Count', price: 45.00 },\n    '5123': { name: 'X-Ray Chest PA', price: 60.00 },\n    '6234': { name: 'ECG', price: 35.00 },\n    '7890': { name: 'Ultrasound Abdomen', price: 120.00 }\n};\n\n// Initialize Application\ndocument.addEventListener('DOMContentLoaded', function() {\n    initializeStepper();\n    initializeEventListeners();\n    updateStepper();\n    updateAllSummaries();\n});\n\n// Initialize Event Listeners\nfunction initializeEventListeners() {\n    // Step navigation\n    document.querySelectorAll('.step').forEach((step) => {\n        step.addEventListener('click', function() {\n            const stepNumber = parseInt(this.dataset.step);\n            goToStep(stepNumber);\n        });\n    });\n\n    // Procedure amount calculations\n    const procAmount = document.getElementById('proc-amount');\n    const procCoinsurance = document.getElementById('proc-coinsurance');\n    const procNet = document.getElementById('proc-net');\n    \n    if (procAmount && procCoinsurance) {\n        procAmount.addEventListener('input', calculateProcedureNet);\n        procCoinsurance.addEventListener('input', calculateProcedureNet);\n    }\n}\n\n// Stepper Functions\nfunction initializeStepper() {\n    currentStep = 1;\n    updateStepper();\n}\n\nfunction updateStepper() {\n    // Update step states\n    document.querySelectorAll('.step').forEach((step, index) => {\n        const stepNumber = index + 1;\n        step.classList.remove('active', 'completed');\n        \n        if (stepNumber < currentStep) {\n            step.classList.add('completed');\n        } else if (stepNumber === currentStep) {\n            step.classList.add('active');\n        }\n    });\n\n    // Update progress bar\n    const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;\n    const progressBar = document.getElementById('stepper-progress');\n    if (progressBar) {\n        progressBar.style.width = `calc(${progress}% - 40px)`;\n    }\n\n    // Update content visibility\n    document.querySelectorAll('.step-content').forEach((content, index) => {\n        const stepNumber = index + 1;\n        content.classList.toggle('active', stepNumber === currentStep);\n    });\n\n    // Update header submit button\n    const headerSubmit = document.getElementById('header-submit');\n    if (headerSubmit) {\n        if (currentStep === totalSteps) {\n            headerSubmit.disabled = false;\n            headerSubmit.innerHTML = '<span>üöÄ</span> Submit for Approval';\n            headerSubmit.onclick = submitVisit;\n        } else {\n            headerSubmit.disabled = true;\n            headerSubmit.innerHTML = '<span>‚úì</span> Send to Approval';\n        }\n    }\n\n    // Update review summary when reaching final step\n    if (currentStep === totalSteps) {\n        updateReviewSummary();\n    }\n}\n\nfunction nextStep() {\n    if (currentStep < totalSteps) {\n        if (validateStep(currentStep)) {\n            currentStep++;\n            updateStepper();\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n    }\n}\n\nfunction prevStep() {\n    if (currentStep > 1) {\n        currentStep--;\n        updateStepper();\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n}\n\nfunction goToStep(stepNumber) {\n    if (stepNumber >= 1 && stepNumber <= totalSteps) {\n        if (stepNumber <= currentStep) {\n            currentStep = stepNumber;\n            updateStepper();\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n    }\n}\n\nfunction validateStep(step) {\n    switch(step) {\n        case 1:\n            return true; // Visit details - no specific validation needed\n        case 2:\n            if (diagnosesList.length === 0) {\n                alert('Please add at least one diagnosis before proceeding.');\n                return false;\n            }\n            return true;\n        case 3:\n            if (proceduresList.length === 0) {\n                alert('Please add at least one procedure before proceeding.');\n                return false;\n            }\n            return true;\n        case 4:\n            if (drugsList.length === 0) {\n                alert('Please add at least one medication before proceeding.');\n                return false;\n            }\n            return true;\n        default:\n            return true;\n    }\n}\n\n// Diagnosis Functions\nfunction addDiagnosis() {\n    const select = document.getElementById('diagnosis-select');\n    const selectedOption = select.options[select.selectedIndex];\n    \n    if (selectedOption.value) {\n        const [code, description] = selectedOption.text.split(' - ');\n        \n        const diagnosis = {\n            code: code,\n            description: description,\n            type: diagnosesList.length === 0 ? 'Primary' : 'Secondary',\n            status: 'Active'\n        };\n        \n        diagnosesList.push(diagnosis);\n        \n        const tbody = document.getElementById('diagnosis-list');\n        const newRow = tbody.insertRow();\n        newRow.innerHTML = `\n            <td><span class=\"code-badge\">${code}</span></td>\n            <td>${description}</td>\n            <td>${diagnosis.type}</td>\n            <td><span class=\"status-badge status-active\">${diagnosis.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editDiagnosis(${diagnosesList.length - 1})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteDiagnosis(this, ${diagnosesList.length - 1})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n        \n        // Reset select\n        select.value = '';\n    } else {\n        alert('Please select a diagnosis to add');\n    }\n}\n\nfunction deleteDiagnosis(button, index) {\n    const row = button.closest('tr');\n    row.remove();\n    diagnosesList.splice(index, 1);\n    refreshDiagnosisTable();\n}\n\nfunction refreshDiagnosisTable() {\n    const tbody = document.getElementById('diagnosis-list');\n    tbody.innerHTML = '';\n    \n    diagnosesList.forEach((diagnosis, index) => {\n        const newRow = tbody.insertRow();\n        newRow.innerHTML = `\n            <td><span class=\"code-badge\">${diagnosis.code}</span></td>\n            <td>${diagnosis.description}</td>\n            <td>${diagnosis.type}</td>\n            <td><span class=\"status-badge status-active\">${diagnosis.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editDiagnosis(${index})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteDiagnosis(this, ${index})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n    });\n}\n\nfunction editDiagnosis(index) {\n    alert('Edit functionality would open a modal to edit diagnosis at index ' + index);\n}\n\n// Procedure Functions\nfunction addProcedure() {\n    const select = document.getElementById('procedure-select');\n    const selectedOption = select.options[select.selectedIndex];\n    const countInput = document.getElementById('proc-count');\n    const amountInput = document.getElementById('proc-amount');\n    const coinsuranceInput = document.getElementById('proc-coinsurance');\n    \n    if (selectedOption.value) {\n        const [code, description] = selectedOption.text.split(' - ');\n        const procedureData = procedureDatabase[selectedOption.value];\n        const count = parseInt(countInput.value) || 1;\n        const amount = parseFloat(amountInput.value) || procedureData.price;\n        const coinsurance = parseFloat(coinsuranceInput.value) || 1.00;\n        const netAmount = amount - coinsurance;\n        \n        const procedure = {\n            code: code,\n            description: description,\n            count: count,\n            amount: amount,\n            coinsurance: coinsurance,\n            netAmount: netAmount,\n            status: 'Approved'\n        };\n        \n        proceduresList.push(procedure);\n        \n        const tbody = document.getElementById('procedures-list');\n        const newRow = tbody.insertRow();\n        newRow.innerHTML = `\n            <td><span class=\"code-badge\">${code}</span></td>\n            <td>${description}</td>\n            <td>${count}</td>\n            <td>${amount.toFixed(2)} JD</td>\n            <td>${coinsurance.toFixed(2)} JD</td>\n            <td>${netAmount.toFixed(2)} JD</td>\n            <td><span class=\"status-badge status-active\">${procedure.status}</span></td>\n            <td>\n                <div class=\"action-buttons\">\n                    <button class=\"btn-icon btn-edit\" onclick=\"editProcedure(${proceduresList.length - 1})\">‚úèÔ∏è</button>\n                    <button class=\"btn-icon btn-delete\" onclick=\"deleteProcedure(this, ${proceduresList.length - 1})\">üóëÔ∏è</button>\n                </div>\n            </td>\n        `;\n        \n        // Update financial summary\n        updateFinancialSummary();\n        \n        // Reset form\n        select.value = '';\n        countInput.value = '1';\n        amountInput.value = '';\n        coinsuranceInput.value = '';\n        document.getElementById('proc-net').value = '';\n    } else {\n        alert('Please select a procedure to add');\n    }\n}\n\nfunction deleteProcedure(button, index) {\n    const row = button.closest('tr');\n    row.remove();\n    proceduresList.splice(index, 1);\n    updateFinancialSummary();\n}\n\nfunction editProcedure(index) {\n    alert('Edit functionality would open a modal to edit procedure at index ' + index);\n}\n\nfunction calculateProcedureNet() {\n    const amountInput = document.getElementById('proc-amount');\n    const coinsuranceInput = document.getElementById('proc-coinsurance');\n    const netInput = document.getElementById('proc-net');\n    \n    const amount = parseFloat(amountInput.value) || 0;\n    const coinsurance = parseFloat(coinsuranceInput.value) || 0;\n    \n    netInput.value = (amount - coinsurance).toFixed(2);\n}\n\nfunction updateFinancialSummary() {\n    let totalClaimed = 0;\n    let totalCoinsurance = 0;\n    let totalNet = 0;\n    \n    proceduresList.forEach(procedure => {\n        totalClaimed += procedure.amount;\n        totalCoinsurance += procedure.coinsurance;\n        totalNet += procedure.netAmount;\n    });\n    \n    document.getElementById('total-claimed').textContent = totalClaimed.toFixed(2) + ' JD';\n    document.getElementById('total-coinsurance').textContent = totalCoinsurance.toFixed(2) + ' JD';\n    document.getElementById('total-net').textContent = totalNet.toFixed(2) + ' JD';\n}\n\n// Drug Functions\nfunction addDrug() {\n    const drugSelect = document.getElementById('drug-select');\n    const selectedDrug = drugSelect.value;\n    \n    if (selectedDrug && selectedDrug !== 'Select option') {\n        const drug = drugDatabase[selectedDrug];\n        const quantity = document.getElementById('drug-quantity').value || '1';\n        const tq = document.getElementById('drug-tq').value;\n        const notes = document.getElementById('drug-notes').value || '-';\n        const unit = document.getElementById('drug-unit').value || '0';\n        const count = document.getElementById('drug-count').value || '1.5';\n        const pricing = document.getElementById('drug-pricing').value || '0';\n        \n        const drugData = {\n            mpType: drug.mpType,\n            type: drug.type,\n            descriptionE: drug.descriptionE,\n            descriptionA: drug.descriptionA,\n            quantity: quantity,\n            unit: drug.defaultUnit,\n            tq: tq !== 'Select option' ? tq : 'Three Times A Day',\n            notes: notes,\n            unitValue: unit,\n            count: count,\n            pricing: pricing\n        };\n        \n        drugsList.push(drugData);\n        \n        const tbody = document.getElementById('drug-table-body');\n        const newRow = tbody.insertRow();\n        \n        newRow.innerHTML = `\n            <td>${drugData.mpType}</td>\n            <td>${drugData.type}</td>\n            <td>${drugData.descriptionE}</td>\n            <td>${drugData.descriptionA}</td>\n            <td>${drugData.quantity}</td>\n            <td>${drugData.unit}</td>\n            <td>${drugData.tq}</td>\n            <td>${drugData.notes}</td>\n            <td>\n                <button class=\"btn-delete\" onclick=\"deleteDrug(this, ${drugsList.length - 1})\">Delete</button>\n            </td>\n        `;\n        \n        // Reset form\n        drugSelect.value = 'Select option';\n        document.getElementById('drug-quantity').value = '1';\n        document.getElementById('drug-tq').value = 'Select option';\n        document.getElementById('drug-notes').value = '';\n        document.getElementById('drug-unit').value = '0';\n        document.getElementById('drug-count').value = '1.5';\n        document.getElementById('drug-pricing').value = '0';\n        \n        updateDrugRecordCount();\n    } else {\n        alert('Please select a drug to add');\n    }\n}\n\nfunction deleteDrug(button, index) {\n    const row = button.closest('tr');\n    row.remove();\n    drugsList.splice(index, 1);\n    updateDrugRecordCount();\n}\n\nfunction deleteRow(button) {\n    const row = button.closest('tr');\n    row.remove();\n    updateDrugRecordCount();\n}\n\nfunction updateDrugRecordCount() {\n    const rowCount = document.getElementById('drug-table-body').rows.length;\n    document.getElementById('drug-records').textContent = `${rowCount} Records`;\n}\n\nfunction searchDrugs() {\n    const searchTerm = document.getElementById('search-drugs').value.toLowerCase();\n    const rows = document.querySelectorAll('#drug-table-body tr');\n    \n    rows.forEach(row => {\n        const text = row.textContent.toLowerCase();\n        row.style.display = text.includes(searchTerm) ? '' : 'none';\n    });\n}\n\nfunction downloadDrugs() {\n    // Create CSV content\n    let csvContent = \"Mp Type,Type,Description E,Description A,Quantity,Unit,TQ,Notes\\n\";\n    \n    drugsList.forEach(drug => {\n        csvContent += `\"${drug.mpType}\",\"${drug.type}\",\"${drug.descriptionE}\",\"${drug.descriptionA}\",`;\n        csvContent += `\"${drug.quantity}\",\"${drug.unit}\",\"${drug.tq}\",\"${drug.notes}\"\\n`;\n    });\n    \n    // Download CSV file\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', 'medications_list.csv');\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\n\n// Pagination\nfunction changePage(direction) {\n    const currentPageInput = document.getElementById('current-page');\n    const currentPage = parseInt(currentPageInput.value) || 1;\n    const totalPages = parseInt(document.getElementById('total-pages').textContent) || 1;\n    \n    const newPage = currentPage + direction;\n    \n    if (newPage >= 1 && newPage <= totalPages) {\n        currentPageInput.value = newPage;\n        // Here you would typically load data for the new page\n    }\n}\n\n// Tab Switching\nfunction switchTab(event, tabName) {\n    document.querySelectorAll('.tab-btn').forEach(btn => {\n        btn.classList.remove('active');\n    });\n    event.target.classList.add('active');\n    \n    // Here you would show/hide different content based on the tab\n    console.log('Switched to tab:', tabName);\n}\n\n// File Upload\nfunction handleFileUpload(event) {\n    const files = event.target.files;\n    const fileList = document.getElementById('uploaded-files');\n    \n    for (let file of files) {\n        uploadedFiles.push(file);\n        \n        const fileItem = document.createElement('div');\n        fileItem.style.cssText = 'padding: 12px; background: #f8f9fb; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;';\n        fileItem.innerHTML = `\n            <div style=\"display: flex; align-items: center; gap: 8px;\">\n                <span>üìÑ</span>\n                <span style=\"font-size: 14px; color: #1a1a1a;\">${file.name}</span>\n                <span style=\"font-size: 12px; color: #888;\">(${(file.size / 1024).toFixed(2)} KB)</span>\n            </div>\n            <button class=\"btn-icon btn-delete\" onclick=\"removeFile(this, '${file.name}')\">üóëÔ∏è</button>\n        `;\n        fileList.appendChild(fileItem);\n    }\n}\n\nfunction removeFile(button, filename) {\n    button.parentElement.remove();\n    uploadedFiles = uploadedFiles.filter(file => file.name !== filename);\n}\n\n// Review Summary\nfunction updateReviewSummary() {\n    // Update diagnoses count\n    document.getElementById('review-diagnoses').textContent = \n        diagnosesList.length + (diagnosesList.length === 1 ? ' diagnosis' : ' diagnoses');\n    \n    // Update procedures count\n    document.getElementById('review-procedures').textContent = \n        proceduresList.length + (proceduresList.length === 1 ? ' procedure' : ' procedures');\n    \n    // Update medications count\n    document.getElementById('review-medications').textContent = \n        drugsList.length + (drugsList.length === 1 ? ' medication' : ' medications');\n    \n    // Update documents count\n    document.getElementById('review-documents').textContent = \n        uploadedFiles.length + (uploadedFiles.length === 1 ? ' file' : ' files');\n    \n    // Update financial summary\n    let totalAmount = 0;\n    let totalCoinsurance = 0;\n    \n    proceduresList.forEach(procedure => {\n        totalAmount += procedure.amount;\n        totalCoinsurance += procedure.coinsurance;\n    });\n    \n    const coverage = totalAmount - totalCoinsurance;\n    \n    document.getElementById('review-total').textContent = totalAmount.toFixed(2) + ' JD';\n    document.getElementById('review-coverage').textContent = coverage.toFixed(2) + ' JD';\n    document.getElementById('review-copayment').textContent = totalCoinsurance.toFixed(2) + ' JD';\n}\n\nfunction updateAllSummaries() {\n    updateFinancialSummary();\n    updateDrugRecordCount();\n}\n\n// Save Draft\nfunction saveDraft() {\n    const visitData = {\n        diagnoses: diagnosesList,\n        procedures: proceduresList,\n        drugs: drugsList,\n        files: uploadedFiles.map(f => f.name),\n        notes: document.getElementById('clinical-notes')?.value || '',\n        timestamp: new Date().toISOString()\n    };\n    \n    // Save to localStorage or send to server\n    localStorage.setItem('visitDraft', JSON.stringify(visitData));\n    \n    alert('Draft saved successfully!');\n}\n\n// Submit Visit\nfunction submitVisit() {\n    // Validate all required data\n    if (diagnosesList.length === 0) {\n        alert('Please add at least one diagnosis before submitting.');\n        return;\n    }\n    \n    if (proceduresList.length === 0) {\n        alert('Please add at least one procedure before submitting.');\n        return;\n    }\n    \n    const visitData = {\n        patient: {\n            name: 'Fuad Abdullah Hamed Fathee',\n            nationalId: '975555555',\n            visitNumber: '0001',\n            visitDate: 'September 23, 2025'\n        },\n        diagnoses: diagnosesList,\n        procedures: proceduresList,\n        drugs: drugsList,\n        files: uploadedFiles.map(f => f.name),\n        notes: document.getElementById('clinical-notes')?.value || '',\n        submittedAt: new Date().toISOString()\n    };\n    \n    // Show loading state\n    const submitBtn = event.target;\n    const originalContent = submitBtn.innerHTML;\n    submitBtn.innerHTML = '<span>‚è≥</span> Submitting...';\n    submitBtn.disabled = true;\n    \n    // Simulate API call\n    setTimeout(() => {\n        submitBtn.innerHTML = '<span>‚úÖ</span> Submitted Successfully!';\n        submitBtn.style.background = 'linear-gradient(135deg, #27ae60, #2ecc71)';\n        \n        // Clear draft\n        localStorage.removeItem('visitDraft');\n        \n        // Show success message\n        setTimeout(() => {\n            alert('Visit has been successfully submitted for approval!');\n            // Reset form or redirect\n            resetForm();\n        }, 1000);\n    }, 2000);\n}\n\n// Reset Form\nfunction resetForm() {\n    // Reset all arrays\n    diagnosesList = [];\n    proceduresList = [];\n    drugsList = [];\n    uploadedFiles = [];\n    \n    // Clear tables\n    document.getElementById('diagnosis-list').innerHTML = '';\n    document.getElementById('procedures-list').innerHTML = '';\n    document.getElementById('drug-table-body').innerHTML = '';\n    document.getElementById('uploaded-files').innerHTML = '';\n    \n    // Reset to first step\n    currentStep = 1;\n    updateStepper();\n    \n    // Update summaries\n    updateAllSummaries();\n}\n\n// Export functions for AppSmith\nconst ClinicSystem = {\n    // Navigation\n    nextStep,\n    prevStep,\n    goToStep,\n    \n    // Diagnosis\n    addDiagnosis,\n    deleteDiagnosis,\n    editDiagnosis,\n    \n    // Procedures\n    addProcedure,\n    deleteProcedure,\n    editProcedure,\n    calculateProcedureNet,\n    \n    // Drugs\n    addDrug,\n    deleteDrug,\n    searchDrugs,\n    downloadDrugs,\n    \n    // File Management\n    handleFileUpload,\n    removeFile,\n    \n    // Form Actions\n    saveDraft,\n    submitVisit,\n    resetForm,\n    \n    // Tab Management\n    switchTab,\n    \n    // Data\n    diagnosesList,\n    proceduresList,\n    drugsList,\n    uploadedFiles\n};\n\n// Make functions globally available for inline onclick handlers\nwindow.nextStep = nextStep;\nwindow.prevStep = prevStep;\nwindow.goToStep = goToStep;\nwindow.addDiagnosis = addDiagnosis;\nwindow.deleteDiagnosis = deleteDiagnosis;\nwindow.editDiagnosis = editDiagnosis;\nwindow.addProcedure = addProcedure;\nwindow.deleteProcedure = deleteProcedure;\nwindow.editProcedure = editProcedure;\nwindow.addDrug = addDrug;\nwindow.deleteDrug = deleteDrug;\nwindow.deleteRow = deleteRow;\nwindow.searchDrugs = searchDrugs;\nwindow.downloadDrugs = downloadDrugs;\nwindow.handleFileUpload = handleFileUpload;\nwindow.removeFile = removeFile;\nwindow.saveDraft = saveDraft;\nwindow.submitVisit = submitVisit;\nwindow.switchTab = switchTab;\nwindow.changePage = changePage;"
  },
  "version": 1,
  "widgetId": "srrsjiafo4",
  "widgetName": "Custom2"
}